(function(){var t={6700:function(t,e,a){var o={"./af":2398,"./af.js":2398,"./ar":4207,"./ar-dz":3382,"./ar-dz.js":3382,"./ar-kw":6525,"./ar-kw.js":6525,"./ar-ly":7098,"./ar-ly.js":7098,"./ar-ma":6483,"./ar-ma.js":6483,"./ar-sa":3961,"./ar-sa.js":3961,"./ar-tn":7401,"./ar-tn.js":7401,"./ar.js":4207,"./az":903,"./az.js":903,"./be":1174,"./be.js":1174,"./bg":4615,"./bg.js":4615,"./bm":225,"./bm.js":225,"./bn":9751,"./bn-bd":544,"./bn-bd.js":544,"./bn.js":9751,"./bo":6894,"./bo.js":6894,"./br":8566,"./br.js":8566,"./bs":959,"./bs.js":959,"./ca":2683,"./ca.js":2683,"./cs":4231,"./cs.js":4231,"./cv":999,"./cv.js":999,"./cy":4302,"./cy.js":4302,"./da":3601,"./da.js":3601,"./de":5509,"./de-at":2479,"./de-at.js":2479,"./de-ch":2924,"./de-ch.js":2924,"./de.js":5509,"./dv":9838,"./dv.js":9838,"./el":5113,"./el.js":5113,"./en-au":7377,"./en-au.js":7377,"./en-ca":9626,"./en-ca.js":9626,"./en-gb":5912,"./en-gb.js":5912,"./en-ie":2931,"./en-ie.js":2931,"./en-il":2243,"./en-il.js":2243,"./en-in":9779,"./en-in.js":9779,"./en-nz":9813,"./en-nz.js":9813,"./en-sg":4318,"./en-sg.js":4318,"./eo":4957,"./eo.js":4957,"./es":9243,"./es-do":7409,"./es-do.js":7409,"./es-mx":5188,"./es-mx.js":5188,"./es-us":6927,"./es-us.js":6927,"./es.js":9243,"./et":7731,"./et.js":7731,"./eu":1072,"./eu.js":1072,"./fa":9462,"./fa.js":9462,"./fi":3368,"./fi.js":3368,"./fil":3626,"./fil.js":3626,"./fo":6421,"./fo.js":6421,"./fr":974,"./fr-ca":7780,"./fr-ca.js":7780,"./fr-ch":9719,"./fr-ch.js":9719,"./fr.js":974,"./fy":8373,"./fy.js":8373,"./ga":3861,"./ga.js":3861,"./gd":4896,"./gd.js":4896,"./gl":739,"./gl.js":739,"./gom-deva":6737,"./gom-deva.js":6737,"./gom-latn":1979,"./gom-latn.js":1979,"./gu":2001,"./gu.js":2001,"./he":9671,"./he.js":9671,"./hi":2038,"./hi.js":2038,"./hr":1228,"./hr.js":1228,"./hu":87,"./hu.js":87,"./hy-am":3569,"./hy-am.js":3569,"./id":1977,"./id.js":1977,"./is":6853,"./is.js":6853,"./it":7859,"./it-ch":5626,"./it-ch.js":5626,"./it.js":7859,"./ja":4123,"./ja.js":4123,"./jv":6457,"./jv.js":6457,"./ka":638,"./ka.js":638,"./kk":6823,"./kk.js":6823,"./km":9493,"./km.js":9493,"./kn":1288,"./kn.js":1288,"./ko":9663,"./ko.js":9663,"./ku":805,"./ku.js":805,"./ky":7550,"./ky.js":7550,"./lb":6272,"./lb.js":6272,"./lo":9135,"./lo.js":9135,"./lt":1452,"./lt.js":1452,"./lv":5782,"./lv.js":5782,"./me":2181,"./me.js":2181,"./mi":258,"./mi.js":258,"./mk":5715,"./mk.js":5715,"./ml":538,"./ml.js":538,"./mn":3086,"./mn.js":3086,"./mr":5663,"./mr.js":5663,"./ms":5100,"./ms-my":2663,"./ms-my.js":2663,"./ms.js":5100,"./mt":880,"./mt.js":880,"./my":9099,"./my.js":9099,"./nb":8709,"./nb.js":8709,"./ne":2201,"./ne.js":2201,"./nl":1016,"./nl-be":1681,"./nl-be.js":1681,"./nl.js":1016,"./nn":5330,"./nn.js":5330,"./oc-lnc":7132,"./oc-lnc.js":7132,"./pa-in":251,"./pa-in.js":251,"./pl":3212,"./pl.js":3212,"./pt":9836,"./pt-br":8831,"./pt-br.js":8831,"./pt.js":9836,"./ro":8443,"./ro.js":8443,"./ru":4,"./ru.js":4,"./sd":4510,"./sd.js":4510,"./se":3148,"./se.js":3148,"./si":542,"./si.js":542,"./sk":7637,"./sk.js":7637,"./sl":5852,"./sl.js":5852,"./sq":611,"./sq.js":611,"./sr":242,"./sr-cyrl":302,"./sr-cyrl.js":302,"./sr.js":242,"./ss":1367,"./ss.js":1367,"./sv":2927,"./sv.js":2927,"./sw":5240,"./sw.js":5240,"./ta":2692,"./ta.js":2692,"./te":2132,"./te.js":2132,"./tet":8300,"./tet.js":8300,"./tg":7211,"./tg.js":7211,"./th":4050,"./th.js":4050,"./tk":3849,"./tk.js":3849,"./tl-ph":3964,"./tl-ph.js":3964,"./tlh":3650,"./tlh.js":3650,"./tr":4195,"./tr.js":4195,"./tzl":5529,"./tzl.js":5529,"./tzm":7520,"./tzm-latn":298,"./tzm-latn.js":298,"./tzm.js":7520,"./ug-cn":4134,"./ug-cn.js":4134,"./uk":5456,"./uk.js":5456,"./ur":5679,"./ur.js":5679,"./uz":9277,"./uz-latn":6446,"./uz-latn.js":6446,"./uz.js":9277,"./vi":3992,"./vi.js":3992,"./x-pseudo":8882,"./x-pseudo.js":8882,"./yo":2899,"./yo.js":2899,"./zh-cn":4017,"./zh-cn.js":4017,"./zh-hk":4831,"./zh-hk.js":4831,"./zh-mo":2881,"./zh-mo.js":2881,"./zh-tw":57,"./zh-tw.js":57};function n(t){var e=r(t);return a(e)}function r(t){if(!a.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}n.keys=function(){return Object.keys(o)},n.resolve=r,t.exports=n,n.id=6700},6886:function(t,e,a){"use strict";a(6992),a(8674),a(9601),a(7727);var o=a(8935),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t.logeado?t._e():a("inicio-sesion",{on:{login:t.onLogin}}),t.logeado?a("div",[a("encabezado-component"),a("div",{staticClass:"container"},[a("router-view")],1)],1):t._e()],1)},r=[],i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-navbar",{staticClass:"fondo",attrs:{type:"is-warning"},scopedSlots:t._u([{key:"brand",fn:function(){return[o("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/"}}},[o("img",{attrs:{src:a(6949)}})])]},proxy:!0},{key:"start",fn:function(){return[o("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/"}}},[o("b-icon",{attrs:{icon:"view-dashboard",size:"is-medium"}}),o("span"),t._v(" Inicio ")],1),o("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/inventario"}}},[o("b-icon",{attrs:{icon:"chart-bar-stacked",size:"is-medium"}}),o("span"),t._v(" Inventario ")],1),o("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/marcas-y-categorias"}}},[o("b-icon",{attrs:{icon:"archive",size:"is-medium"}}),o("span"),t._v(" Marcas y categorías ")],1),o("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/realizar-venta"}}},[o("b-icon",{attrs:{icon:"cash-fast",size:"is-medium"}}),o("span"),t._v(" Vender ")],1),o("b-navbar-item",[o("b-icon",{staticClass:"is-pulled-left",attrs:{icon:"file-chart-outline",size:"is-medium"}}),o("b-navbar-dropdown",{attrs:{label:"Reportes",icon:"home"}},[o("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/reporte-ventas"}}},[o("b-icon",{attrs:{icon:"cash-register"}}),o("span"),t._v(" Ventas ")],1),o("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/reporte-cuentas"}}},[o("b-icon",{attrs:{icon:"wallet"}}),o("span"),t._v(" Cuentas ")],1),o("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/reporte-apartados"}}},[o("b-icon",{attrs:{icon:"wallet-travel"}}),o("span"),t._v(" Apartados ")],1),o("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/reporte-cotizaciones"}}},[o("b-icon",{attrs:{icon:"ticket-outline"}}),o("span"),t._v(" Cotizaciones ")],1)],1)],1),o("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/usuarios"}}},[o("b-icon",{attrs:{icon:"account",size:"is-medium"}}),o("span"),t._v(" Usuarios ")],1),o("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/clientes"}}},[o("b-icon",{attrs:{icon:"account-supervisor",size:"is-medium"}}),o("span"),t._v(" Clientes ")],1)]},proxy:!0},{key:"end",fn:function(){return[o("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/configurar"}}},[o("b-icon",{attrs:{icon:"cogs",size:"is-medium"}}),o("span"),t._v(" Configurar ")],1),o("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/perfil"}}},[o("b-icon",{attrs:{icon:"account",size:"is-medium"}}),o("span"),t._v(" "+t._s(t.usuario)+" ")],1),o("b-navbar-item",[o("div",{staticClass:"buttons"},[o("a",{staticClass:"button is-light",on:{click:t.salir}},[t._v(" Salir ")])])])]},proxy:!0}])})},s=[],c={verificarSesion:function(){var t=localStorage.getItem("id");return!!t},obtenerDatosSesion:function(){var t=localStorage.getItem("id"),e=localStorage.getItem("usuario"),a=localStorage.getItem("nombre");return{id:t,usuario:e,nombre:a}},establecerSesion:function(t){localStorage.setItem("id",t.id),localStorage.setItem("usuario",t.usuario),localStorage.setItem("nombre",t.nombre)},establecerDatosNegocio:function(t){localStorage.setItem("nombreNegocio",t.nombre),localStorage.setItem("telefonoNegocio",t.telefono),localStorage.setItem("logoNegocio",t.logo)},obtenerDatosNegocio:function(){return{nombre:localStorage.getItem("nombreNegocio"),telefono:localStorage.getItem("telefonoNegocio"),logo:localStorage.getItem("logoNegocio")}},cerrarSesion:function(){localStorage.removeItem("id"),localStorage.removeItem("usuario"),localStorage.removeItem("nombre"),location.reload()}},l=c,u={name:"EncabezadoComponent",data:function(){return{usuario:""}},mounted:function(){this.usuario=l.obtenerDatosSesion().usuario},methods:{salir:function(){l.cerrarSesion()}}},d=u,p=a(1001),m=(0,p.Z)(d,i,s,!1,null,null,null),b=m.exports,f=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"hero  is-fullheight fondo"},[o("div",{staticClass:"hero-body"},[o("div",{staticClass:"container"},[o("div",{staticClass:"box"},[o("h1",{staticClass:"title is-1 has-text-centered is-family-monospace"},[t._v("Sistema de ventas by")]),o("img",{staticStyle:{display:"block",margin:"0 auto"},attrs:{src:a(6949),width:"300"}}),o("b-field",{attrs:{label:"Nombre de usuario"}},[o("b-input",{attrs:{icon:"shield-account",type:"text",placeholder:"Ej. paco"},model:{value:t.usuario.usuario,callback:function(e){t.$set(t.usuario,"usuario",e)},expression:"usuario.usuario"}})],1),o("b-field",{attrs:{label:"Contraseña"}},[o("b-input",{attrs:{type:"password",placeholder:"Contraseña","password-reveal":""},model:{value:t.usuario.password,callback:function(e){t.$set(t.usuario,"password",e)},expression:"usuario.password"}})],1),o("b-button",{attrs:{type:"is-primary",size:"is-large","icon-left":"check"},on:{click:t.iniciarSesion}},[t._v("Ingresar")])],1),t.informacionNegocio?o("div",{staticClass:"has-text-centered"},[o("h2",{staticClass:"title is-2 has-text-danger-dark has-text-weight-bold"},[t._v(t._s(t.informacionNegocio.nombre))]),o("h3",{staticClass:"title is-3 has-text-info-dark has-text-weight-bold"},[t._v("Teléfono: "+t._s(t.informacionNegocio.telefono))])]):t._e(),o("img",{staticStyle:{display:"block",margin:"0 auto"},attrs:{src:"http://localhost/pos/api/logos/logo.png",width:"300",height:"300"}})])])])},g=[],h=a(7906),v=a(6198),C=(a(1539),a(8862),"http://localhost/pos/api/"),_={registrar:function(t,e){return(0,v.Z)((0,h.Z)().mark((function a(){var o,n;return(0,h.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,fetch(C+t,{method:"post",body:JSON.stringify(e)});case 2:return o=a.sent,a.next=5,o.json();case 5:return n=a.sent,a.abrupt("return",n);case 7:case"end":return a.stop()}}),a)})))()},obtener:function(t){return(0,v.Z)((0,h.Z)().mark((function e(){var a,o;return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(C+t);case 2:return a=e.sent,e.next=5,a.json();case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))()},editar:function(t,e){return(0,v.Z)((0,h.Z)().mark((function a(){var o,n;return(0,h.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,fetch(C+t,{method:"post",body:JSON.stringify(e)});case 2:return o=a.sent,a.next=5,o.json();case 5:return n=a.sent,a.abrupt("return",n);case 7:case"end":return a.stop()}}),a)})))()},eliminar:function(t,e){return(0,v.Z)((0,h.Z)().mark((function a(){var o,n;return(0,h.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,fetch(C+t,{method:"post",body:JSON.stringify(e)});case 2:return o=a.sent,a.next=5,o.json();case 5:return n=a.sent,a.abrupt("return",n);case 7:case"end":return a.stop()}}),a)})))()},obtenerConConsultas:function(t,e){return(0,v.Z)((0,h.Z)().mark((function a(){var o,n;return(0,h.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,fetch(C+t,{method:"post",body:JSON.stringify(e)});case 2:return o=a.sent,a.next=5,o.json();case 5:return n=a.sent,a.abrupt("return",n);case 7:case"end":return a.stop()}}),a)})))()},obtenerDatosNegocio:function(){return this.obtener("configuracion/obtener_datos.php")}},y=_,k={name:"InicioSesion",data:function(){return{usuario:{usuario:"",password:""},informacionNegocio:null}},mounted:function(){this.obtenerInformacionLocal(),this.informacionNegocio=l.obtenerDatosNegocio()},methods:{iniciarSesion:function(){var t=this,e={accion:"iniciar_sesion",usuario:this.usuario};y.obtenerConConsultas("usuarios.php",e).then((function(e){e?e.estado&&(t.$buefy.toast.open({type:"is-info",message:"Información correcta. Bienvenido."}),t.$router.push({name:"InicioComponent"}),t.$emit("login",e)):t.$buefy.toast.open({type:"is-danger",message:"Información incorrecta. Verifica."})}))},obtenerInformacionLocal:function(){y.obtenerConConsultas("ajustes.php",{accion:"obtener"}).then((function(t){l.establecerDatosNegocio(t)}))}}},x=k,w=(0,p.Z)(x,f,g,!1,null,null,null),S=w.exports,P={name:"App",components:{EncabezadoComponent:b,InicioSesion:S},data:function(){return{logeado:!1}},mounted:function(){var t=l.verificarSesion();this.logeado=t,console.log(this.logeado)},methods:{onLogin:function(t){console.log(t),t.estado&&(l.establecerSesion(t.usuario),this.logeado=l.verificarSesion())}}},E=P,$=(0,p.Z)(E,n,r,!1,null,null,null),j=$.exports,z=a(5564),M=(a(1588),a(2809)),A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("nav-component",{attrs:{titulo:"Inventario",link:{path:"/agregar-producto"},texto:"Agregar producto"}}),a("b-breadcrumb",{attrs:{align:"is-left"}},[a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/"}},[t._v("Inicio")]),a("b-breadcrumb-item",{attrs:{active:""}},[t._v("Inventario")])],1),t.productos.length<1?a("mensaje-inicial",{attrs:{titulo:"No se han encontrado productos :(",subtitulo:"Agrega productos pulsando el botón de Agregar productos"}}):t._e(),t.productos.length>0?a("div",[a("cartas-totales",{attrs:{totales:t.cartasTotales}}),a("b-select",{model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}},[a("option",{attrs:{value:"5"}},[t._v("5 por página")]),a("option",{attrs:{value:"10"}},[t._v("10 por página")]),a("option",{attrs:{value:"15"}},[t._v("15 por página")]),a("option",{attrs:{value:"20"}},[t._v("20 por página")])]),a("b-table",{staticClass:"box",attrs:{data:t.productos,paginated:t.isPaginated,"per-page":t.perPage,"current-page":t.currentPage,"pagination-simple":t.isPaginationSimple,"pagination-position":t.paginationPosition,"default-sort-direction":t.defaultSortDirection,"pagination-rounded":t.isPaginationRounded,"sort-icon":t.sortIcon,"sort-icon-size":t.sortIconSize,"default-sort":"user.first_name","aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page"},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}},[a("b-table-column",{attrs:{field:"codigo",label:"Código",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.codigo)+" ")]}}],null,!1,3162132532)}),a("b-table-column",{attrs:{field:"nombre",label:"Nombre",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.nombre)+" ")]}}],null,!1,3843434756)}),a("b-table-column",{attrs:{field:"precioCompra",label:"Precio compra",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" $"+t._s(e.row.precioCompra)+" ")]}}],null,!1,1706334937)}),a("b-table-column",{attrs:{field:"precioVenta",label:"Precio venta",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" $"+t._s(e.row.precioVenta)+" ")]}}],null,!1,694685363)}),a("b-table-column",{attrs:{field:"ganancia",label:"Ganacia",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b",[t._v("$"+t._s(e.row.precioVenta-e.row.precioCompra))])]}}],null,!1,4020260452)}),a("b-table-column",{attrs:{field:"vendidoMayoreo",label:"¿Mayoreo?",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.vendidoMayoreo?t._e():a("b-tag",{attrs:{type:"is-danger"}},[t._v("No")]),e.row.vendidoMayoreo?a("div",[a("b",[t._v("Precio: ")]),t._v("$"+t._s(e.row.precioMayoreo)),a("br"),a("b",[t._v("A partir: ")]),t._v(t._s(e.row.cantidadMayoreo)+" ")]):t._e()]}}],null,!1,1269735218)}),a("b-table-column",{attrs:{field:"existencia",label:"Existencia",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.existencia)+" ")]}}],null,!1,4119800846)}),a("b-table-column",{attrs:{field:"nombreMarca",label:"Marca",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.nombreMarca)+" ")]}}],null,!1,3010406328)}),a("b-table-column",{attrs:{field:"nombreCategoria",label:"Categoría",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.nombreCategoria)+" ")]}}],null,!1,2703042277)}),a("b-table-column",{attrs:{field:"eliminar",label:"Eliminar"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-button",{attrs:{type:"is-danger"},on:{click:function(a){return t.eliminar(e.row.id)}}},[a("b-icon",{attrs:{icon:"delete"}})],1)]}}],null,!1,608520963)}),a("b-table-column",{attrs:{field:"editar",label:"Editar"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-button",{attrs:{type:"is-info"},on:{click:function(a){return t.editar(e.row.id)}}},[a("b-icon",{attrs:{icon:"pen"}})],1)]}}],null,!1,290644034)}),a("b-table-column",{attrs:{field:"editar",label:"Agregar"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-button",{attrs:{type:"is-primary"},on:{click:function(a){return t.agregarExistencia(e.row)}}},[a("b-icon",{attrs:{icon:"plus"}})],1)]}}],null,!1,2124434075)}),a("b-table-column",{attrs:{field:"editar",label:"Quitar"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-button",{attrs:{type:"is-warning"},on:{click:function(a){return t.quitarExistencia(e.row)}}},[a("b-icon",{attrs:{icon:"minus"}})],1)]}}],null,!1,2823224548)})],1)],1):t._e(),a("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:t.cargando,callback:function(e){t.cargando=e},expression:"cargando"}})],1)},I=[],T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"level mt-2"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("p",{staticClass:"title is-1"},[t._v(t._s(t.titulo))])])]),a("div",{staticClass:"level-right"},[a("p",{staticClass:"level-item"},[a("b-button",{staticClass:"is-rounded",attrs:{type:"is-primary",size:"is-large","icon-left":"plus",tag:"router-link",to:t.link}},[t._v(" "+t._s(t.texto)+" ")])],1)])])},D=[],N={name:"NavComponent",props:["titulo","link","texto"]},Z=N,V=(0,p.Z)(Z,T,D,!1,null,null,null),R=V.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"hero is-medium is-primary"},[a("div",{staticClass:"hero-body"},[a("p",{staticClass:"title"},[t._v(" "+t._s(t.titulo)+" ")]),a("p",{staticClass:"subtitle"},[t._v(" "+t._s(t.subtitulo)+" ")])])])},U=[],F={name:"mensajeInicial",props:["titulo","subtitulo"]},O=F,G=(0,p.Z)(O,q,U,!1,null,null,null),L=G.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tile is-ancestor"},[a("div",{staticClass:"tile is-parent"},t._l(t.totales,(function(e,o){return a("div",{key:o,staticClass:"card tile is-child"},[a("div",{staticClass:"card-content"},[a("div",{staticClass:"level is-mobile"},[a("div",{staticClass:"level-item"},[a("div",{staticClass:"is-widget-label"},[a("h3",{staticClass:"subtitle is-spaced"},[t._v(t._s(e.nombre))]),a("h1",{staticClass:"title"},[a("div",[t._v(t._s(e.total))])])]),a("div",{staticClass:"level-item has-widget-icon"},[a("div",{staticClass:"is-widget-icon"},[a("span",{staticClass:"icon is-large",class:e.clase},[a("b-icon",{attrs:{icon:e.icono,size:"is-large"}})],1)])])])])])])})),0)])},J=[],Q={name:"CartasTotales",props:["totales"]},H=Q,Y=(0,p.Z)(H,B,J,!1,null,null,null),W=Y.exports,X={name:"ProductosComponent",components:{NavComponent:R,MensajeInicial:L,CartasTotales:W},data:function(){return{productos:[],cargando:!1,isPaginated:!0,isPaginationSimple:!1,isPaginationRounded:!0,paginationPosition:"bottom",defaultSortDirection:"asc",sortIcon:"arrow-up",sortIconSize:"is-medium",currentPage:1,perPage:5,cartasTotales:[]}},mounted:function(){this.obtenerProductos()},methods:{agregarExistencia:function(t){var e=this;this.$buefy.dialog.prompt({message:"¿Cuántas piezas vas a agregar de "+t.nombre+"?",cancelText:"Cancelar",confirmText:"Agregar",inputAttrs:{type:"number",placeholder:"Escribe la cantidad de productos",value:"",min:1},trapFocus:!0,onConfirm:function(a){e.cargando=!0,y.registrar("productos.php",{accion:"agregar_existencia",cantidad:a,id:t.id}).then((function(o){o&&(e.cargando=!1,e.$buefy.toast.open(a+" Productos agregados a "+t.nombre),e.obtenerProductos())}))}})},quitarExistencia:function(t){var e=this;this.$buefy.dialog.prompt({message:"¿Cuántas piezas vas a quitar de "+t.nombre+"?",cancelText:"Cancelar",confirmText:"Quitar",inputAttrs:{type:"number",placeholder:"Escribe la cantidad de productos",value:"",min:1},trapFocus:!0,onConfirm:function(a){a>t.existencia?e.$buefy.toast.open("No puedes quitar más de "+t.existencia+" productos"):(e.cargando=!0,y.registrar("productos.php",{accion:"restar_existencia",cantidad:a,id:t.id}).then((function(o){o&&(e.cargando=!1,e.$buefy.toast.open(a+" Productos quitados a "+t.nombre),e.obtenerProductos())})))}})},eliminar:function(t){var e=this;return(0,v.Z)((0,h.Z)().mark((function a(){return(0,h.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$buefy.dialog.confirm({title:"Eliminar producto",message:"Seguro que quieres <b>eliminar</b> este producto? Esta acción no se puede revertir.",confirmText:"Sí, eliminar",cancelText:"Cancelar",type:"is-danger",hasIcon:!0,onConfirm:function(){e.cargando=!0,y.eliminar("productos.php",{accion:"eliminar",id:t}).then((function(t){if(!t)return e.$buefy.toast.open("Error al eliminar"),void(e.cargando=!1);t&&(e.cargando=!1,e.$buefy.toast.open({type:"is-info",message:"Producto eliminado."}),e.obtenerProductos())}))}});case 1:case"end":return a.stop()}}),a)})))()},editar:function(t){this.$router.push({name:"EditarProducto",params:{id:t}})},obtenerProductos:function(){var t=this;this.cargando=!0;var e={accion:"obtener"};y.obtenerConConsultas("productos.php",e).then((function(e){t.productos=e.productos,t.cartasTotales=[{nombre:"Número Productos",total:t.productos.length,icono:"package-variant-closed",clase:"has-text-danger"},{nombre:"Total productos",total:e.totalProductos,icono:"chart-bar-stacked",clase:"has-text-primary"},{nombre:"Total inventario",total:"$"+e.totalInventario,icono:"currency-usd",clase:"has-text-success"},{nombre:"Ganancia",total:"$"+e.gananciaInventario,icono:"currency-usd",clase:"has-text-info"}],t.cargando=!1}))}}},K=X,tt=(0,p.Z)(K,A,I,!1,null,null,null),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("p",{staticClass:"title is-1"},[t._v("Agregar productos")]),a("b-breadcrumb",{attrs:{align:"is-left"}},[a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/"}},[t._v("Inicio")]),a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/inventario"}},[t._v("Inventario")]),a("b-breadcrumb-item",{attrs:{active:""}},[t._v("Agregar producto")])],1),a("form-producto",{attrs:{productoProp:t.producto},on:{registrado:t.onRegistrado}}),a("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:t.cargando,callback:function(e){t.cargando=e},expression:"cargando"}})],1)},ot=[],nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"box"},[a("b-field",{attrs:{grouped:"","group-multiline":""}},[a("b-field",{attrs:{label:"Código de barras",expanded:""}},[a("b-input",{attrs:{type:"number",icon:"barcode",placeholder:"Código de barras"},model:{value:t.producto.codigo,callback:function(e){t.$set(t.producto,"codigo",e)},expression:"producto.codigo"}})],1),a("b-field",{attrs:{label:"Nombre",expanded:""}},[a("b-input",{attrs:{placeholder:"Nombre o descripción del producto"},model:{value:t.producto.nombre,callback:function(e){t.$set(t.producto,"nombre",e)},expression:"producto.nombre"}})],1)],1),a("b-field",{attrs:{grouped:"","group-multiline":""}},[a("b-field",{attrs:{label:"Precio compra",expanded:""}},[a("b-input",{attrs:{step:"any",icon:"currency-usd",type:"number",placeholder:"Precio de compra"},model:{value:t.producto.precioCompra,callback:function(e){t.$set(t.producto,"precioCompra",e)},expression:"producto.precioCompra"}})],1),a("b-field",{attrs:{label:"Precio venta",expanded:""}},[a("b-input",{attrs:{step:"any",icon:"currency-usd",type:"number",placeholder:"Precio de venta",min:t.producto.precioCompra},model:{value:t.producto.precioVenta,callback:function(e){t.$set(t.producto,"precioVenta",e)},expression:"producto.precioVenta"}})],1),a("b-field",{attrs:{label:"Existencia",expanded:""}},[a("b-numberinput",{attrs:{min:"1",type:"is-info",placeholder:"Existencia"},model:{value:t.producto.existencia,callback:function(e){t.$set(t.producto,"existencia",e)},expression:"producto.existencia"}})],1)],1),a("br"),a("b-field",{attrs:{grouped:"","group-multiline":""}},[a("b-field",[a("b-switch",{attrs:{type:"is-info"},model:{value:t.producto.vendidoMayoreo,callback:function(e){t.$set(t.producto,"vendidoMayoreo",e)},expression:"producto.vendidoMayoreo"}},[t._v(" ¿Vendido al mayoreo? ")])],1),t.producto.vendidoMayoreo?a("b-field",{attrs:{label:"Precio mayoreo",expanded:""}},[a("b-input",{attrs:{step:"any",icon:"currency-usd",type:"number",placeholder:"Precio de venta al mayoreo",min:t.producto.precioCompra},model:{value:t.producto.precioMayoreo,callback:function(e){t.$set(t.producto,"precioMayoreo",e)},expression:"producto.precioMayoreo"}})],1):t._e(),t.producto.vendidoMayoreo?a("b-field",{attrs:{label:"Cantidad mayoreo",expanded:""}},[a("b-numberinput",{attrs:{min:"1",type:"is-info",placeholder:"Cantidad para aplicar mayoreo"},model:{value:t.producto.cantidadMayoreo,callback:function(e){t.$set(t.producto,"cantidadMayoreo",e)},expression:"producto.cantidadMayoreo"}})],1):t._e()],1),a("br"),a("b-field",{attrs:{grouped:"","group-multiline":""}},[a("b-field",{attrs:{label:"Selecciona una marca"}},[a("b-select",{attrs:{placeholder:"Marca",icon:"tag-multiple"},model:{value:t.producto.marca,callback:function(e){t.$set(t.producto,"marca",e)},expression:"producto.marca"}},t._l(t.marcas,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.nombreMarca)+" ")])})),0)],1),a("b-field",{attrs:{label:"Selecciona una categoría"}},[a("b-select",{attrs:{placeholder:"Categoría",icon:"archive"},model:{value:t.producto.categoria,callback:function(e){t.$set(t.producto,"categoria",e)},expression:"producto.categoria"}},t._l(t.categorias,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.nombreCategoria)+" ")])})),0)],1)],1),a("br"),a("div",{staticClass:"buttons has-text-centered"},[a("b-button",{attrs:{type:"is-primary",size:"is-large","icon-left":"check"},on:{click:t.registrar}},[t._v("Registrar")]),a("b-button",{attrs:{type:"is-dark",size:"is-large","icon-left":"cancel",tag:"router-link",to:"/inventario"}},[t._v("Cancelar")])],1),t.mensajesError.length>0?a("errores-component",{attrs:{errores:t.mensajesError}}):t._e()],1)},rt=[],it=a(3571),st=(a(9714),a(1249),a(7941),a(9720),a(4747),a(5395)),ct=a.n(st),lt="http://localhost/pos/api",ut=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dt={resetearGrafica:function(t,e,a){var o=document.querySelector(t),n=document.querySelector(e);n.remove();var r=document.createElement("canvas");r.setAttribute("id",a),o.appendChild(r)},generarGrafica:function(t,e,a,o,n){this.resetearGrafica(a,o,n);var r=this.generarEtiquetas(e),i=this.generarValores(e),s={labels:r,datasets:[{label:"Total ",data:i,backgroundColor:this.generarColores(r.length),fill:!1,tension:.1,borderWidth:3}]},c=document.getElementById(n).getContext("2d"),l={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}};new(ct())(c,{responsive:!0,type:t,data:s,options:l})},generarColores:function(t){for(var e=[],a=0;a<t;a++)e.push("#"+Math.floor(16777215*Math.random()).toString(16));return e},cambiarNumeroANombreMes:function(t){for(var e=0;e<t.length;e++){var a=t[e].mes;t[e].mes=ut[a-1]}return t},generarEtiquetas:function(t){var e=t.map((function(t){return t[Object.keys(t)[0]]}));return e},generarValores:function(t){var e=t.map((function(t){return t.totalVentas}));return e},validarDatos:function(t){for(var e=[],a=0,o=Object.entries(t);a<o.length;a++){var n=(0,it.Z)(o[a],2),r=n[0],i=n[1];i||e.push("Debes colocar el valor de "+r)}return e},calcularTotalGanancia:function(t){var e=0;return t.forEach((function(t){t.productos.forEach((function(t){e+=parseFloat(t.cantidad*t.precio)-parseFloat(t.cantidad*t.precioCompra)}))})),e},calcularProductosVendidos:function(t){var e=0;return t.forEach((function(t){t.productos.forEach((function(t){e+=parseFloat(t.cantidad)}))})),e},regresarRuta:function(){return lt}},pt=dt,mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"hero is-danger"},[a("div",{staticClass:"hero-body"},[a("p",{staticClass:"title"},[t._v(" Debes completar los siguientes campos ")]),t._l(t.errores,(function(e,o){return a("p",{key:o,staticClass:"subtitle"},[t._v(" "+t._s(e)+" ")])}))],2)])},bt=[],ft={name:"ErroresComponent",props:["errores"]},gt=ft,ht=(0,p.Z)(gt,mt,bt,!1,null,null,null),vt=ht.exports,Ct={name:"FormProducto",props:["productoProp"],components:{ErroresComponent:vt},data:function(){return{categorias:[],marcas:[],producto:{codigo:"",nombre:"",precioCompra:"",precioVenta:"",existencia:0,vendidoMayoreo:!1,precioMayoreo:"",cantidadMayoreo:0,categoria:"",marca:""},mensajesError:[]}},mounted:function(){this.obtenerCategorias(),this.obtenerMarcas(),this.producto=this.productoProp,this.producto.vendidoMayoreo=1===this.productoProp.vendidoMayoreo,this.producto.cantidadMayoreo=parseInt(this.productoProp.cantidadMayoreo)},methods:{registrar:function(){var t={"Código":this.producto.codigo,Nombre:this.producto.nombre,"Precio compra":this.producto.precioCompra,"Precio venta":this.producto.precioVenta,Existencia:this.producto.existencia};this.mensajesError=pt.validarDatos(t),parseFloat(this.producto.precioVenta)<parseFloat(this.producto.precioCompra)&&this.mensajesError.push("El precio de venta debe ser mayor al precio compra"),this.mensajesError.length>0||(this.$emit("registrado",this.producto),this.producto={codigo:"",nombre:"",precioCompra:"",precioVenta:"",existencia:0,vendidoMayoreo:!1,precioMayoreo:"",cantidadMayoreo:0,categoria:"",marca:""})},obtenerMarcas:function(){var t=this,e={accion:"obtener"};y.obtenerConConsultas("marcas.php",e).then((function(e){t.marcas=e}))},obtenerCategorias:function(){var t=this,e={accion:"obtener"};y.obtenerConConsultas("categorias.php",e).then((function(e){t.categorias=e}))}}},_t=Ct,yt=(0,p.Z)(_t,nt,rt,!1,null,null,null),kt=yt.exports,xt={name:"AgregarProducto",components:{FormProducto:kt},data:function(){return{cargando:!1,producto:{codigo:"",nombre:"",precioCompra:"",precioVenta:"",existencia:0,vendidoMayoreo:!1,precioMayoreo:"",cantidadMayoreo:0,categoria:"",marca:""}}},methods:{onRegistrado:function(t){var e=this;console.log(t),this.cargando=!0;var a={accion:"registrar",producto:t};y.registrar("productos.php",a).then((function(t){t&&(e.cargando=!1,e.$buefy.toast.open({type:"is-info",message:"Producto registrado con éxito."}))}))}}},wt=xt,St=(0,p.Z)(wt,at,ot,!1,null,null,null),Pt=St.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("h1",{staticClass:"title is-1"},[t._v("Editar producto")]),a("b-breadcrumb",{attrs:{align:"is-left"}},[a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/"}},[t._v("Inicio")]),a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/inventario"}},[t._v("Inventario")]),a("b-breadcrumb-item",{attrs:{active:""}},[t._v("Editar producto")])],1),t.datosProducto?a("form-producto",{attrs:{productoProp:t.datosProducto},on:{registrado:t.onEditar}}):t._e()],1)},$t=[],jt={name:"EditarProducto",components:{FormProducto:kt},data:function(){return{cargando:!1,datosProducto:null}},mounted:function(){var t=this;return(0,v.Z)((0,h.Z)().mark((function e(){var a;return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.cargando=!0,e.next=3,y.obtenerConConsultas("productos.php",{accion:"obtener_por_id",id:t.$route.params.id});case 3:a=e.sent,t.datosProducto=a,t.cargando=!1;case 6:case"end":return e.stop()}}),e)})))()},methods:{onEditar:function(t){var e=this;return(0,v.Z)((0,h.Z)().mark((function a(){var o;return(0,h.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.cargando=!0,a.next=3,y.editar("productos.php",{accion:"editar",producto:t});case 3:o=a.sent,o&&(e.cargando=!1,e.$buefy.toast.open({type:"is-info",message:"Información de producto actualizada con éxito."}),e.$router.push({name:"ProductosComponent"}));case 5:case"end":return a.stop()}}),a)})))()}}},zt=jt,Mt=(0,p.Z)(zt,Et,$t,!1,null,null,null),At=Mt.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("p",{staticClass:"title is-1"},[t._v("Marcas y categorías")]),a("b-breadcrumb",{attrs:{align:"is-left"}},[a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/"}},[t._v("Inicio")]),a("b-breadcrumb-item",{attrs:{active:""}},[t._v("Marcas y categorías")])],1),a("b-tabs",{attrs:{size:"is-large"},model:{value:t.tabActiva,callback:function(e){t.tabActiva=e},expression:"tabActiva"}},[a("b-tab-item",{attrs:{label:"Marcas",icon:"tag-multiple"}},[a("marcas-component")],1),a("b-tab-item",{attrs:{label:"Categorías",icon:"archive"}},[a("categorias-component")],1)],1)],1)},Tt=[],Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("b-button",{staticClass:"is-rounded",attrs:{type:"is-primary",size:"is-medium","icon-left":"plus"},on:{click:t.agregarMarca}},[t._v(" Agregar marca ")]),a("b-table",{attrs:{data:t.marcas}},[a("b-table-column",{attrs:{field:"nombreMarca",label:"Marca",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.nombreMarca)+" ")]}}])}),a("b-table-column",{attrs:{field:"eliminar",label:"Eliminar"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-button",{attrs:{type:"is-danger","icon-left":"delete"},on:{click:function(a){return t.eliminar(e.row)}}},[t._v("Eliminar")])]}}])}),a("b-table-column",{attrs:{field:"editar",label:"Editar"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-button",{attrs:{type:"is-info","icon-left":"pen"},on:{click:function(a){return t.editar(e.row)}}},[t._v("Editar")])]}}])})],1),a("b-modal",{attrs:{"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"aria-role":"dialog","aria-label":"Modal","close-button-aria-label":"Close","aria-modal":""},model:{value:t.mostrarDialogoMarcas,callback:function(e){t.mostrarDialogoMarcas=e},expression:"mostrarDialogoMarcas"}},[t.mostrarDialogoMarcas?a("dialogo-marcas",{attrs:{titulo:t.tituloModal,nombre:t.nombreMarca},on:{close:t.onCerrarDialogo,registrar:t.onRegistrar}}):t._e()],1),a("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:t.cargando,callback:function(e){t.cargando=e},expression:"cargando"}})],1)},Nt=[],Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{attrs:{action:""}},[a("div",{staticClass:"modal-card",staticStyle:{width:"600px"}},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v(t._s(t.titulo)+" marca")]),a("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}})]),a("section",{staticClass:"modal-card-body"},[a("b-field",{attrs:{label:"Nombre de la marca"}},[a("b-input",{attrs:{type:"text",placeholder:"Ej. Pelikan"},model:{value:t.nombreMarca,callback:function(e){t.nombreMarca=e},expression:"nombreMarca"}})],1)],1),a("footer",{staticClass:"modal-card-foot"},[a("b-button",{attrs:{label:"Cancelar","icon-left":"cancel",size:"is-medium"},on:{click:function(e){return t.$emit("close")}}}),a("b-button",{attrs:{label:"Registrar",type:"is-primary","icon-left":"check"},on:{click:t.registrar}})],1)])])},Vt=[],Rt={name:"DialogoMarcas",props:["titulo","nombre"],data:function(){return{nombreMarca:""}},mounted:function(){this.nombreMarca=this.nombre},methods:{registrar:function(){this.nombreMarca?this.$emit("registrar",this.nombreMarca):this.$buefy.toast.open({type:"is-danger",message:"Debes colocar el nombre de la marca."})}}},qt=Rt,Ut=(0,p.Z)(qt,Zt,Vt,!1,null,null,null),Ft=Ut.exports,Ot={name:"MarcasComponent",components:{DialogoMarcas:Ft},data:function(){return{cargando:!1,marcas:[],mostrarDialogoMarcas:!1,tituloModal:"",nombreMarca:"",idMarca:""}},mounted:function(){this.obtenerMarcas()},methods:{eliminar:function(t){var e=this;this.$buefy.dialog.confirm({title:"Eliminar marca",message:"Seguro que quieres <b>eliminar</b> la marca "+t.nombreMarca+"? Esta acción no se puede revertir.",confirmText:"Sí, eliminar",cancelText:"Cancelar",type:"is-danger",hasIcon:!0,onConfirm:function(){e.cargando=!0,y.eliminar("marcas.php",{accion:"eliminar",id:t.id}).then((function(t){if(!t)return e.$buefy.toast.open("Error al eliminar"),void(e.cargando=!1);t&&(e.cargando=!1,e.$buefy.toast.open({type:"is-info",message:"Marca eliminada."}),e.obtenerMarcas())}))}})},editar:function(t){this.tituloModal="Editar",this.mostrarDialogoMarcas=!0,this.idMarca=t.id,this.nombreMarca=t.nombreMarca},onCerrarDialogo:function(){this.mostrarDialogoMarcas=!1,this.nombreMarca=""},onRegistrar:function(t){var e=this;this.cargando=!0;var a="Agregar"===this.tituloModal?"registrar":"Editar"===this.tituloModal&&"editar";y.registrar("marcas.php",{accion:a,marca:{nombreMarca:t,id:this.idMarca}}).then((function(a){if("existe"===a)return e.$buefy.toast.open({type:"is-primary",message:"La marca"+t+" ya existe, selecciona otra."}),void(e.cargando=!1);a&&(e.cargando=!1,e.$buefy.toast.open({type:"is-info",message:"Información de marca registrada con éxito."}),e.obtenerMarcas(),e.nombreMarca="",e.mostrarDialogoMarcas=!1)}))},agregarMarca:function(){this.tituloModal="Agregar",this.mostrarDialogoMarcas=!0},obtenerMarcas:function(){var t=this;this.cargando=!0;var e={accion:"obtener"};y.obtenerConConsultas("marcas.php",e).then((function(e){t.marcas=e,t.cargando=!1}))}}},Gt=Ot,Lt=(0,p.Z)(Gt,Dt,Nt,!1,null,null,null),Bt=Lt.exports,Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("b-button",{staticClass:"is-rounded",attrs:{type:"is-primary",size:"is-medium","icon-left":"plus"},on:{click:t.agregarCategoria}},[t._v(" Agregar categoría ")]),a("b-table",{attrs:{data:t.categorias}},[a("b-table-column",{attrs:{field:"nombreCategoria",label:"Categoria",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.nombreCategoria)+" ")]}}])}),a("b-table-column",{attrs:{field:"eliminar",label:"Eliminar"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-button",{attrs:{type:"is-danger","icon-left":"delete"},on:{click:function(a){return t.eliminar(e.row)}}},[t._v("Eliminar")])]}}])}),a("b-table-column",{attrs:{field:"editar",label:"Editar"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-button",{attrs:{type:"is-info","icon-left":"pen"},on:{click:function(a){return t.editar(e.row)}}},[t._v("Editar")])]}}])})],1),a("b-modal",{attrs:{"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"aria-role":"dialog","aria-label":"Modal","close-button-aria-label":"Close","aria-modal":""},model:{value:t.mostrarDialogoCategorias,callback:function(e){t.mostrarDialogoCategorias=e},expression:"mostrarDialogoCategorias"}},[t.mostrarDialogoCategorias?a("dialogo-categorias",{attrs:{titulo:t.tituloModal,nombre:t.nombreCategoria},on:{close:t.onCerrarDialogo,registrar:t.onRegistrar}}):t._e()],1),a("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:t.cargando,callback:function(e){t.cargando=e},expression:"cargando"}})],1)},Qt=[],Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{attrs:{action:""}},[a("div",{staticClass:"modal-card",staticStyle:{width:"600px"}},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v(t._s(t.titulo)+" categoría")]),a("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}})]),a("section",{staticClass:"modal-card-body"},[a("b-field",{attrs:{label:"Nombre de la categoría"}},[a("b-input",{attrs:{type:"text",placeholder:"Ej. Libretas"},model:{value:t.nombreCategoria,callback:function(e){t.nombreCategoria=e},expression:"nombreCategoria"}})],1)],1),a("footer",{staticClass:"modal-card-foot"},[a("b-button",{attrs:{label:"Cancelar","icon-left":"cancel",size:"is-medium"},on:{click:function(e){return t.$emit("close")}}}),a("b-button",{attrs:{label:"Registrar",type:"is-primary","icon-left":"check"},on:{click:t.registrar}})],1)])])},Yt=[],Wt={name:"DialogoCategorias",props:["titulo","nombre"],data:function(){return{nombreCategoria:""}},mounted:function(){this.nombreCategoria=this.nombre},methods:{registrar:function(){this.nombreCategoria?this.$emit("registrar",this.nombreCategoria):this.$buefy.toast.open({type:"is-danger",message:"Debes colocar el nombre de la categoría."})}}},Xt=Wt,Kt=(0,p.Z)(Xt,Ht,Yt,!1,null,null,null),te=Kt.exports,ee={name:"CategoriasComponent",components:{DialogoCategorias:te},data:function(){return{categorias:[],cargando:!1,mostrarDialogoCategorias:!1,tituloModal:"",nombreCategoria:"",idCategoria:""}},mounted:function(){this.obtenerCategorias()},methods:{eliminar:function(t){var e=this;this.$buefy.dialog.confirm({title:"Eliminar categoría",message:"Seguro que quieres <b>eliminar</b> la categoría "+t.nombreCategoria+"? Esta acción no se puede revertir.",confirmText:"Sí, eliminar",cancelText:"Cancelar",type:"is-danger",hasIcon:!0,onConfirm:function(){e.cargando=!0,y.eliminar("categorias.php",{accion:"eliminar",id:t.id}).then((function(t){if(!t)return e.$buefy.toast.open("Error al eliminar"),void(e.cargando=!1);t&&(e.cargando=!1,e.$buefy.toast.open({type:"is-info",message:"Categoría eliminada."}),e.obtenerCategorias())}))}})},editar:function(t){this.tituloModal="Editar",this.mostrarDialogoCategorias=!0,this.idCategoria=t.id,this.nombreCategoria=t.nombreCategoria},onCerrarDialogo:function(){this.mostrarDialogoCategorias=!1,this.nombreCategoria=""},onRegistrar:function(t){var e=this;this.cargando=!0;var a="Agregar"===this.tituloModal?"registrar":"Editar"===this.tituloModal&&"editar";y.registrar("categorias.php",{accion:a,categoria:{nombreCategoria:t,id:this.idCategoria}}).then((function(a){if("existe"===a)return e.$buefy.toast.open({type:"is-primary",message:"La categoría"+t+" ya existe, selecciona otra."}),void(e.cargando=!1);a&&(e.cargando=!1,e.$buefy.toast.open({type:"is-info",message:"Información de categoría registrada con éxito."}),e.obtenerCategorias(),e.nombreCategoria="",e.mostrarDialogoCategorias=!1)}))},agregarCategoria:function(){this.tituloModal="Agregar",this.mostrarDialogoCategorias=!0},obtenerCategorias:function(){var t=this;this.cargando=!0;var e={accion:"obtener"};y.obtenerConConsultas("categorias.php",e).then((function(e){t.categorias=e,t.cargando=!1}))}}},ae=ee,oe=(0,p.Z)(ae,Jt,Qt,!1,null,null,null),ne=oe.exports,re={name:"MarcasCategorias",components:{MarcasComponent:Bt,CategoriasComponent:ne},data:function(){return{tabActiva:0}}},ie=re,se=(0,p.Z)(ie,It,Tt,!1,null,null,null),ce=se.exports,le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("buscar-producto",{on:{seleccionado:t.onSeleccionado}}),t.productos.length<1?a("mensaje-inicial",{attrs:{titulo:"No has agregado productos",subtitulo:"Agrega algunos productos a la lista para venderlos :)"}}):t._e(),t.productos.length>0?a("div",[a("tabla-productos",{attrs:{listaProductos:t.productos},on:{quitar:t.onQuitar,aumentar:t.onAumentar}}),a("div",{staticClass:"notification is-primary mt-3"},[a("p",{staticClass:" has-text-weight-bold has-text-centered",staticStyle:{"font-size":"5em"}},[t._v(" Total $"+t._s(t.total)+" ")]),a("nav",{staticClass:"level mt-2"},[a("div",{staticClass:"level-item has-text-centered"},[a("b-button",{staticClass:"button is-responsive",attrs:{type:"is-success",inverted:"","icon-left":"check",size:"is-large"},on:{click:function(e){return t.abrirDialogo("venta")}}},[t._v(" Terminar venta ")])],1),a("div",{staticClass:"level-item has-text-centered"},[a("b-button",{staticClass:"button is-responsive",attrs:{type:"is-info",inverted:"","icon-left":"wallet-plus",size:"is-large"},on:{click:function(e){return t.abrirDialogo("cuenta")}}},[t._v(" Agregar a cuenta ")])],1),a("div",{staticClass:"level-item has-text-centered"},[a("b-button",{staticClass:"button is-responsive",attrs:{type:"is-dark",inverted:"","icon-left":"wallet-travel",size:"is-large"},on:{click:function(e){return t.abrirDialogo("apartado")}}},[t._v(" Realizar apartado ")])],1),a("div",{staticClass:"level-item has-text-centered"},[a("b-button",{staticClass:"button is-responsive",attrs:{type:"is-danger",inverted:"","icon-left":"cancel",size:"is-large"},on:{click:t.cancelarVenta}},[t._v(" Cancelar ")])],1),a("div",{staticClass:"level-item has-text-centered"},[a("b-button",{staticClass:"button is-responsive",attrs:{type:"is-warning",inverted:"","icon-left":"ticket-outline",size:"is-large"},on:{click:function(e){return t.abrirDialogo("cotiza")}}},[t._v(" Cotizar ")])],1)])])],1):t._e(),a("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:t.cargando,callback:function(e){t.cargando=e},expression:"cargando"}}),a("b-modal",{attrs:{"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"aria-role":"dialog","aria-label":"Modal Terminar Venta","close-button-aria-label":"Close","aria-modal":""},model:{value:t.mostrarDialogo,callback:function(e){t.mostrarDialogo=e},expression:"mostrarDialogo"}},[t.mostrarTerminarVenta?a("dialogo-terminar-venta",{attrs:{totalVenta:t.total},on:{close:t.onCerrar,terminar:t.onTerminar}}):t._e(),t.mostrarAgregarCuenta?a("dialogo-agregar-cuenta",{attrs:{totalVenta:t.total},on:{close:t.onCerrar,terminar:t.onTerminar}}):t._e(),t.mostrarAgregarApartado?a("dialogo-agregar-apartado",{attrs:{totalVenta:t.total},on:{close:t.onCerrar,terminar:t.onTerminar}}):t._e(),t.mostrarRegistrarCotizacion?a("dialogo-cotizar",{attrs:{totalVenta:t.total},on:{close:t.onCerrar,terminar:t.onTerminar}}):t._e()],1),t.mostrarComprobante?a("comprobante-compra",{attrs:{venta:this.ventaRealizada,tipo:t.tipoVenta},on:{impreso:t.onImpreso}}):t._e()],1)},ue=[],de=(a(4916),a(5306),a(7042),a(3753),a(4553),a(561),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-field",{attrs:{label:"Buscar producto por nombre o código de barras"}},[a("b-autocomplete",{attrs:{id:"producto",placeholder:"Escribe el nombre o el código de barras del producto","keep-first":!0,data:t.productosFiltrados,field:"nombre",size:"is-large"},on:{input:t.buscarProductos,select:t.seleccionarProducto},model:{value:t.producto,callback:function(e){t.producto=e},expression:"producto"}})],1)}),pe=[],me=(a(7327),{name:"BuscarProducto",data:function(){return{producto:"",productosEncontrados:[]}},mounted:function(){this.ponerFocus()},methods:{seleccionarProducto:function(t){var e=this;t&&(this.$emit("seleccionado",t),this.ponerFocus(),setTimeout((function(){return e.producto=""}),10))},buscarProductos:function(){var t=this,e={accion:"obtener_nombre_codigo",producto:this.producto};y.obtenerConConsultas("productos.php",e).then((function(e){t.productosEncontrados=e}))},ponerFocus:function(){document.querySelector("#producto").focus()}},computed:{productosFiltrados:function(){var t=this;return this.productosEncontrados.filter((function(e){return e.nombre.toString().toLowerCase().indexOf(t.producto.toLowerCase())>=0||e.codigo.toString().indexOf(t.producto)>=0}))}}}),be=me,fe=(0,p.Z)(be,de,pe,!1,null,null,null),ge=fe.exports,he=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-table",{attrs:{data:t.listaProductos}},[a("b-table-column",{attrs:{field:"codigo",label:"Código"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.codigo)+" ")]}}])}),a("b-table-column",{attrs:{field:"nombre",label:"Nombre"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.nombre)+" ")]}}])}),a("b-table-column",{attrs:{field:"precio",label:"Precio"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" $"+t._s(e.row.precio)+" ")]}}])}),a("b-table-column",{attrs:{field:"cantidad",label:"Cantidad"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-field",[a("b-numberinput",{staticStyle:{width:"13em"},attrs:{min:"1",max:e.row.existencia},on:{input:function(a){return t.aumentar(e.row)}},model:{value:e.row.cantidad,callback:function(a){t.$set(e.row,"cantidad",a)},expression:"props.row.cantidad"}})],1)]}}])}),a("b-table-column",{attrs:{field:"subtotal",label:"Subtotal"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b",[t._v("$"+t._s(e.row.precio*e.row.cantidad))])]}}])}),a("b-table-column",{attrs:{field:"quitar",label:"Quitar"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-button",{attrs:{"icon-left":"delete",type:"is-danger"},on:{click:function(a){return t.quitar(e.row.id)}}},[t._v(" Quitar ")])]}}])})],1)},ve=[],Ce={name:"TablaProductos",props:["listaProductos"],data:function(){return{}},methods:{quitar:function(t){this.$emit("quitar",t)},aumentar:function(t){this.$emit("aumentar",t)}}},_e=Ce,ye=(0,p.Z)(_e,he,ve,!1,null,null,null),ke=ye.exports,xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{attrs:{action:""}},[a("div",{staticClass:"modal-card",staticStyle:{width:"600px"}},[a("header",{staticClass:"modal-card-head has-background-success"},[a("p",{staticClass:"modal-card-title has-text-white"},[t._v("Terminar venta")]),a("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(e){return t.$emit("close","venta")}}})]),a("section",{staticClass:"modal-card-body"},[a("p",{staticClass:"is-size-1 has-text-weight-bold"},[t._v("Total $"+t._s(t.totalVenta))]),a("busqueda-cliente",{on:{seleccionado:t.onSeleccionado}}),a("b-field",{attrs:{label:"El cliente paga con"}},[a("b-input",{ref:"pagado",attrs:{step:"any",icon:"currency-usd",type:"number",placeholder:"Monto pagado",size:"is-medium"},on:{input:t.calcularCambio},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.terminarVenta.apply(null,arguments)}},model:{value:t.pagado,callback:function(e){t.pagado=e},expression:"pagado"}})],1),a("p",{staticClass:"is-size-1 has-text-weight-bold"},[t._v("Cambio $"+t._s(t.cambio))])],1),a("footer",{staticClass:"modal-card-foot"},[a("b-button",{attrs:{label:"Cancelar","icon-left":"cancel",size:"is-medium"},on:{click:function(e){return t.$emit("close","venta")}}}),a("b-button",{attrs:{label:"Terminar venta",type:"is-success","icon-left":"check",size:"is-medium"},on:{click:t.terminarVenta}})],1)])])},we=[],Se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("b-field",{attrs:{label:"Nombre del cliente"}},[a("b-autocomplete",{attrs:{id:"cliente",placeholder:"Escribe el nombre del cliente","keep-first":!0,data:t.clientesFiltrados,field:"nombre",size:"is-medium"},on:{input:t.buscarClientes,select:t.seleccionarCliente},model:{value:t.cliente,callback:function(e){t.cliente=e},expression:"cliente"}})],1),t.clienteSeleccionado?a("div",{staticClass:"notification is-info mt-2"},[a("button",{staticClass:"delete",on:{click:t.deseleccionarCliente}}),a("p",[t._v("Cliente: "),a("b",[t._v(t._s(t.clienteSeleccionado.nombre))])]),a("p",[t._v("Teléfono: "),a("b",[t._v(t._s(t.clienteSeleccionado.telefono))])])]):t._e()],1)},Pe=[],Ee={name:"BusquedaCliente",data:function(){return{cliente:"",clientesEncontrados:[],clienteSeleccionado:null}},methods:{deseleccionarCliente:function(){this.clienteSeleccionado=null},seleccionarCliente:function(t){var e=this;t&&(this.clienteSeleccionado=t,this.$emit("seleccionado",this.clienteSeleccionado),setTimeout((function(){return e.cliente=""}),10))},buscarClientes:function(){var t=this,e={accion:"obtener_por_nombre",nombre:this.cliente};y.obtenerConConsultas("clientes.php",e).then((function(e){t.clientesEncontrados=e}))}},computed:{clientesFiltrados:function(){var t=this;return this.clientesEncontrados.filter((function(e){return e.nombre.toString().toLowerCase().indexOf(t.cliente.toLowerCase())>=0}))}}},$e=Ee,je=(0,p.Z)($e,Se,Pe,!1,null,null,null),ze=je.exports,Me={name:"DialogoTerminarVenta",props:["totalVenta"],components:{BusquedaCliente:ze},data:function(){return{pagado:"",cambio:0,cliente:{}}},mounted:function(){this.$refs.pagado.focus()},methods:{onSeleccionado:function(t){this.cliente=t},calcularCambio:function(){this.cambio=parseFloat(this.pagado-this.totalVenta)},terminarVenta:function(){if(""===this.pagado||this.pagado<this.totalVenta)this.$buefy.toast.open({type:"is-danger",message:"Debes colocar el total pagado."});else{var t={tipo:"venta",pagado:this.pagado,cambio:this.cambio,cliente:this.cliente};this.$emit("terminar",t)}}}},Ae=Me,Ie=(0,p.Z)(Ae,xe,we,!1,null,null,null),Te=Ie.exports,De=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{attrs:{action:""}},[a("div",{staticClass:"modal-card",staticStyle:{width:"600px"}},[a("header",{staticClass:"modal-card-head has-background-info"},[a("p",{staticClass:"modal-card-title has-text-white"},[t._v("Agregar a cuenta")]),a("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(e){return t.$emit("close","cuenta")}}})]),a("section",{staticClass:"modal-card-body"},[a("p",{staticClass:"is-size-1 has-text-weight-bold"},[t._v("Total $"+t._s(t.totalVenta))]),a("busqueda-cliente",{on:{seleccionado:t.onSeleccionado}}),a("b-field",{attrs:{label:"Pago inicial"}},[a("b-input",{attrs:{step:"any",icon:"currency-usd",type:"number",placeholder:"Cuánto deja el cliente",size:"is-medium"},on:{input:t.calcularRestante},model:{value:t.pagado,callback:function(e){t.pagado=e},expression:"pagado"}})],1),a("p",{staticClass:"is-size-1 has-text-weight-bold"},[t._v("Por Pagar $"+t._s(t.porPagar))])],1),a("footer",{staticClass:"modal-card-foot"},[a("b-button",{attrs:{label:"Cancelar","icon-left":"cancel",size:"is-medium"},on:{click:function(e){return t.$emit("close","cuenta")}}}),a("b-button",{attrs:{label:"Agregar a cuenta",type:"is-info","icon-left":"wallet-plus",size:"is-medium"},on:{click:t.agregarCuenta}})],1)])])},Ne=[],Ze={name:"DialogoAgregarCuenta",props:["totalVenta"],components:{BusquedaCliente:ze},data:function(){return{pagado:"",porPagar:0,cliente:{}}},mounted:function(){this.calcularRestante()},methods:{onSeleccionado:function(t){this.cliente=t},calcularRestante:function(){this.porPagar=parseFloat(this.totalVenta-this.pagado)},agregarCuenta:function(){if(0!==Object.keys(this.cliente).length){var t={tipo:"cuenta",pagado:this.pagado,porPagar:this.porPagar,cliente:this.cliente};this.$emit("terminar",t)}else this.$buefy.toast.open({type:"is-danger",message:"Debes seleccionar un cliente."})}}},Ve=Ze,Re=(0,p.Z)(Ve,De,Ne,!1,null,null,null),qe=Re.exports,Ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{attrs:{action:""}},[a("div",{staticClass:"modal-card",staticStyle:{width:"600px"}},[a("header",{staticClass:"modal-card-head has-background-dark"},[a("p",{staticClass:"modal-card-title has-text-white"},[t._v("Agregar apartado")]),a("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(e){return t.$emit("close","apartado")}}})]),a("section",{staticClass:"modal-card-body"},[a("p",{staticClass:"is-size-1 has-text-weight-bold"},[t._v("Total $"+t._s(t.totalVenta))]),a("busqueda-cliente",{on:{seleccionado:t.onSeleccionado}}),a("b-field",{attrs:{label:"Pago inicial"}},[a("b-input",{attrs:{step:"any",icon:"currency-usd",type:"number",placeholder:"Cuánto deja el cliente",size:"is-medium"},on:{input:t.calcularRestante},model:{value:t.pagado,callback:function(e){t.pagado=e},expression:"pagado"}})],1),a("p",{staticClass:"is-size-1 has-text-weight-bold"},[t._v("Por Pagar $"+t._s(t.porPagar))])],1),a("footer",{staticClass:"modal-card-foot"},[a("b-button",{attrs:{label:"Cancelar","icon-left":"cancel",size:"is-medium"},on:{click:function(e){return t.$emit("close","apartado")}}}),a("b-button",{attrs:{label:"Agregar apartado",type:"is-dark","icon-left":"wallet-travel",size:"is-medium"},on:{click:t.agregarApartado}})],1)])])},Fe=[],Oe={name:"DialogoAgregarApartado",props:["totalVenta"],components:{BusquedaCliente:ze},data:function(){return{pagado:"",porPagar:0,cliente:{}}},mounted:function(){this.calcularRestante()},methods:{onSeleccionado:function(t){this.cliente=t},calcularRestante:function(){this.porPagar=parseFloat(this.totalVenta-this.pagado)},agregarApartado:function(){if(0!==Object.keys(this.cliente).length){var t={tipo:"apartado",pagado:this.pagado,porPagar:this.porPagar,cliente:this.cliente};this.$emit("terminar",t)}else this.$buefy.toast.open({type:"is-danger",message:"Debes seleccionar un cliente."})}}},Ge=Oe,Le=(0,p.Z)(Ge,Ue,Fe,!1,null,null,null),Be=Le.exports,Je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{attrs:{action:""}},[a("div",{staticClass:"modal-card",staticStyle:{width:"600px"}},[a("header",{staticClass:"modal-card-head has-background-warning"},[a("p",{staticClass:"modal-card-title "},[t._v("Agregar cotizacion")]),a("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(e){return t.$emit("close","cotiza")}}})]),a("section",{staticClass:"modal-card-body"},[a("p",{staticClass:"is-size-1 has-text-weight-bold"},[t._v("Total $"+t._s(t.totalVenta))]),a("busqueda-cliente",{on:{seleccionado:t.onSeleccionado}})],1),a("footer",{staticClass:"modal-card-foot"},[a("b-button",{attrs:{label:"Cancelar","icon-left":"cancel",size:"is-medium"},on:{click:function(e){return t.$emit("close","cotiza")}}}),a("b-button",{attrs:{label:"Guardar cotización",type:"is-dark","icon-left":"ticket-outline",size:"is-medium"},on:{click:t.guardarCotizacion}})],1)])])},Qe=[],He={name:"DialogoCotizar",props:["totalVenta"],components:{BusquedaCliente:ze},data:function(){return{cliente:{}}},methods:{onSeleccionado:function(t){this.cliente=t},guardarCotizacion:function(){if(0!==Object.keys(this.cliente).length){var t={tipo:"cotiza",cliente:this.cliente};this.$emit("terminar",t)}else this.$buefy.toast.open({type:"is-danger",message:"Debes seleccionar un cliente."})}}},Ye=He,We=(0,p.Z)(Ye,Je,Qe,!1,null,null,null),Xe=We.exports,Ke=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",[t.datosNegocio?o("div",{staticClass:"comprobante",attrs:{id:"comprobante"}},[o("p",[o("b",[t._v(t._s(t.titulo))])]),o("p",[t._v(t._s(t.datosNegocio.nombre)+" Teléfono: "+t._s(t.datosNegocio.telefono))]),o("img",{attrs:{src:t.datosNegocio.logo,alt:"Aqui el logo",width:"30"}}),o("p",[o("b",[t._v("Cliente:")]),t._v(t._s(t.venta.nombreCliente))]),o("p",[o("b",[t._v("Atiende:")]),t._v(t._s(t.venta.nombreUsuario))]),o("p",[o("b",[t._v("Fecha: ")]),t._v(t._s(t.venta.fecha))]),o("table",[t._m(0),o("tbody",t._l(t.venta.productos,(function(e,a){return o("tr",{key:a},[o("td",[t._v(t._s(e.nombre))]),o("td",[t._v("$"+t._s(e.precio)+" X "+t._s(e.cantidad))]),o("td",[t._v("$"+t._s(e.precio*e.cantidad))])])})),0)]),o("p",[o("b",[t._v("Total:")]),t._v("$"+t._s(t.venta.total))]),"cotiza"!==t.tipo?o("p",[o("b",[t._v("Su pago:")]),t._v("$"+t._s(t.venta.pagado))]):t._e(),"venta"===t.tipo?o("p",[o("b",[t._v("Cambio:")]),t._v("$"+t._s(t.venta.pagado-t.venta.total))]):t._e(),"cuenta"===t.tipo||"apartado"===t.tipo?o("p",[o("b",[t._v("Por pagar:")]),t._v("$"+t._s(t.venta.porPagar))]):t._e(),t._m(1),o("p",[t._v("----------------------------")]),o("p",[t._v("Sistema de ventas por")]),o("img",{attrs:{src:a(6949),width:"120"}})]):t._e()])},ta=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("Producto")]),a("th"),a("th",[t._v("Total")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("b",[t._v("Gracias por su preferencia")])])}],ea=a(8587),aa={name:"ComprobanteCompra",props:["venta","tipo"],data:function(){return{titulo:"",datosNegocio:null,cssText:"\n            .comprobante{\n                width: 250px;\n                font-family: monospace;\n                font-size: 14px;\n            }\n\n            .comprobante > p{\n                margin: 0!important;\n                padding: 0!important;\n                text-align: center;\n            }\n\n            .comprobante > img{\n                display: block;\n                margin: 0 auto;\n            }\n\n            .comprobante > th, td {\n              border-bottom: 1px solid #ddd;\n              font-size: 12px !important;\n              margin: 0!important;\n              padding: 0!important;\n            }\n        "}},beforeMount:function(){this.generarTitulo(),this.obtenerDatosNegocio()},mounted:function(){this.d=new ea.ZP;var t=this.d.getIFrame(),e=t.contentWindow;e.addEventListener("beforeprint",(function(){return console.log("before print event!")})),e.addEventListener("afterprint",(function(){return console.log("after print event!")})),this.imprimir()},methods:{generarTitulo:function(){switch(this.tipo){case"venta":this.titulo="COMPROBANTE DE COMPRA";break;case"cuenta":this.titulo="COMPROBANTE DE CUENTA";break;case"apartado":this.titulo="COMPROBANTE DE APARTADO";break;case"cotiza":this.titulo="COTIZACIÓN";break;default:this.titulo="COMPROBANTE"}},obtenerDatosNegocio:function(){this.datosNegocio=l.obtenerDatosNegocio(),this.datosNegocio.logo=pt.regresarRuta()+this.datosNegocio.logo},imprimir:function(){var t=this,e=document.getElementById("comprobante");setTimeout((function(){return t.d.print(e,[t.cssText])}),10),this.$emit("impreso",!1)}}},oa=aa,na=(0,p.Z)(oa,Ke,ta,!1,null,"be24b7d8",null),ra=na.exports,ia={name:"RealizarVenta",components:{BuscarProducto:ge,TablaProductos:ke,DialogoTerminarVenta:Te,DialogoAgregarCuenta:qe,DialogoAgregarApartado:Be,DialogoCotizar:Xe,MensajeInicial:L,ComprobanteCompra:ra},data:function(){return{cargando:!1,productos:[],total:0,mostrarDialogo:!1,mostrarTerminarVenta:!1,mostrarAgregarCuenta:!1,mostrarAgregarApartado:!1,mostrarRegistrarCotizacion:!1,ventaRealizada:null,mostrarComprobante:!1,tipoVenta:""}},methods:{onImpreso:function(t){this.mostrarComprobante=t},onTerminar:function(t){var e=this;this.ventaRealizada={total:this.total,productos:this.productos,cliente:t.cliente.id,usuario:l.obtenerDatosSesion().id,nombreCliente:t.cliente.nombre?t.cliente.nombre:"MOSTRADOR",nombreUsuario:l.obtenerDatosSesion().usuario,fecha:(new Date).toJSON().slice(0,10).replace(/-/g,"/")};var a=t.tipo;switch(a){case"venta":this.ventaRealizada.tipo="venta",this.ventaRealizada.pagado=t.pagado,this.ventaRealizada.cambio=t.cambio,console.log(this.ventaRealizada);break;case"cuenta":this.ventaRealizada.tipo="cuenta",this.ventaRealizada.pagado=t.pagado,this.ventaRealizada.porPagar=t.porPagar,console.log(this.ventaRealizada);break;case"apartado":this.ventaRealizada.tipo="apartado",this.ventaRealizada.pagado=t.pagado,this.ventaRealizada.porPagar=t.porPagar,console.log(this.ventaRealizada);break;case"cotiza":this.ventaRealizada.tipo="cotiza",console.log(this.ventaRealizada);break}this.tipoVenta=t.tipo,this.cargando=!0;var o={accion:"vender",datos:this.ventaRealizada};y.registrar("vender.php",o).then((function(t){console.log(t),t&&(e.productos=[],e.total=0,e.cargando=!1,e.mostrarTerminarVenta=e.mostrarAgregarCuenta=e.mostrarAgregarApartado=e.mostrarRegistrarCotizacion=!1,e.mostrarDialogo=!1,e.$buefy.toast.open({type:"is-info",message:a.toUpperCase()+" registrado con éxito"}),e.mostrarComprobante=!0)}))},cancelarVenta:function(){var t=this;this.$buefy.dialog.confirm({title:"Cancelar venta",message:"¿Seguro que deseas cancelar la venta?",confirmText:"Sí, cancelar",cancelText:"No, continuar",type:"is-danger",hasIcon:!0,onConfirm:function(){t.productos=[],t.total=0,t.$buefy.toast.open("Venta cancelada")}})},abrirDialogo:function(t){switch(this.mostrarDialogo=!0,t){case"venta":this.mostrarTerminarVenta=!0,this.mostrarAgregarCuenta=this.mostrarAgregarApartado=this.mostrarRegistrarCotizacion=!1;break;case"cuenta":this.mostrarAgregarCuenta=!0,this.mostrarTerminarVenta=this.mostrarAgregarApartado=this.mostrarRegistrarCotizacion=!1;break;case"apartado":this.mostrarAgregarApartado=!0,this.mostrarAgregarCuenta=this.mostrarTerminarVenta=this.mostrarRegistrarCotizacion=!1;break;case"cotiza":this.mostrarRegistrarCotizacion=!0,this.mostrarAgregarCuenta=this.mostrarTerminarVenta=this.mostrarAgregarApartado=!1;break}},onCerrar:function(t){this.mostrarDialogo=!1,"venta"!==t&&"cuenta"!==t&&"apartado"!==t&&"cotiza"!==t||(this.mostrarTerminarVenta=this.mostrarAgregarCuenta=this.mostrarAgregarApartado=this.mostrarRegistrarCotizacion=!1)},onQuitar:function(t){var e=this.productos.findIndex((function(e){return e.id===t}));this.productos.splice(e,1),this.total=this.calcularTotal()},onAumentar:function(t){var e=this.verificarExistenciaAlcanzada(t.existencia,t.id);e||(t.vendidoMayoreo&&this.verificarMayoreo(t.cantidadMayoreo,t.id,t.precioMayoreo),this.total=this.calcularTotal())},onSeleccionado:function(t){var e=this.verificarExistenciaAlcanzada(t.existencia,t.id);if(!e){console.log(t),t.vendidoMayoreo&&this.verificarMayoreo(t.cantidadMayoreo,t.id,t.precioMayoreo);var a=this.verificarSiEstaEnLista(t.id);if(a>=0)return this.aumentarCantidad(a),void(this.total=this.calcularTotal());this.agregarALista(t),this.total=this.calcularTotal()}},agregarALista:function(t){this.productos.push({id:t.id,codigo:t.codigo,nombre:t.nombre,precio:t.precioVenta,cantidad:1,existencia:t.existencia,vendidoMayoreo:t.vendidoMayoreo,cantidadMayoreo:t.cantidadMayoreo,precioMayoreo:t.precioMayoreo,mayoreoAplicado:!1})},verificarExistenciaAlcanzada:function(t,e){var a=this,o=!1;return this.productos.forEach((function(n){n.id===e&&parseInt(n.cantidad)>=parseInt(t)&&(a.$buefy.toast.open({type:"is-danger",message:"El producto "+n.nombre+"ha alcanzado la existencia máxima. Solo tienes "+n.existencia}),n.cantidad=t,o=!0)})),o},verificarMayoreo:function(t,e,a){var o=this;this.productos.forEach((function(n){n.mayoreoAplicado||n.id===e&&n.cantidad>=parseInt(t)&&o.$buefy.dialog.confirm({confirmText:"Sí, aplicar",cancelText:"No aplicar",message:"El producto "+n.nombre+" tiene mayoreo a partir de "+t+" piezas, ¿Desea aplicar el mayoreo?",onConfirm:function(){n.precio=a,n.mayoreoAplicado=!0,o.$buefy.toast.open("Mayoreo aplicado correctamente a "+n.nombre)}})}))},verificarSiEstaEnLista:function(t){return this.productos.findIndex((function(e){return e.id===t}))},aumentarCantidad:function(t){var e=this.productos,a=e[t];a.cantidad++,this.productos=e},calcularTotal:function(){var t=0;return this.productos.forEach((function(e){t=parseFloat(e.cantidad*e.precio)+parseFloat(t)})),t}}},sa=ia,ca=(0,p.Z)(sa,le,ue,!1,null,null,null),la=ca.exports,ua=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("p",{staticClass:"title is-1"},[t._v("Reporte de ventas")]),a("b-breadcrumb",{attrs:{align:"is-left"}},[a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/"}},[t._v("Inicio")]),a("b-breadcrumb-item",{attrs:{active:""}},[t._v("Ventas")])],1),a("busqueda-en-fecha",{on:{seleccionada:t.onBusquedaEnFecha}}),t.ventas.length<1?a("mensaje-inicial",{staticClass:"mt-2",attrs:{titulo:"No se han encontrado ventas :(",subtitulo:"Aquí aparecerán las ventas registradas"}}):t._e(),t.ventas.length>0?a("div",{staticClass:"mt-2"},[a("cartas-totales",{attrs:{totales:t.totalesGenerales}}),a("b-select",{model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}},[a("option",{attrs:{value:"5"}},[t._v("5 por página")]),a("option",{attrs:{value:"10"}},[t._v("10 por página")]),a("option",{attrs:{value:"15"}},[t._v("15 por página")]),a("option",{attrs:{value:"20"}},[t._v("20 por página")])]),a("b-table",{staticClass:"box",attrs:{data:t.ventas,paginated:t.isPaginated,"per-page":t.perPage,"current-page":t.currentPage,"pagination-simple":t.isPaginationSimple,"pagination-position":t.paginationPosition,"default-sort-direction":t.defaultSortDirection,"pagination-rounded":t.isPaginationRounded,"sort-icon":t.sortIcon,"sort-icon-size":t.sortIconSize,"default-sort":"user.first_name","aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page"},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}},[a("b-table-column",{attrs:{field:"fecha",label:"Fecha",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.fecha)+" ")]}}],null,!1,1839029428)}),a("b-table-column",{attrs:{field:"nombreCliente",label:"Cliente",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.nombreCliente)+" ")]}}],null,!1,1401020376)}),a("b-table-column",{attrs:{field:"nombreUsuario",label:"Usuario",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.nombreUsuario)+" ")]}}],null,!1,1942981314)}),a("b-table-column",{attrs:{field:"pagado",label:"Pago",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" $"+t._s(e.row.pagado)+" ")]}}],null,!1,3068680133)}),a("b-table-column",{attrs:{field:"Cambio",label:"Cambio",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" $"+t._s(e.row.pagado-e.row.total)+" ")]}}],null,!1,3671276910)}),a("b-table-column",{attrs:{field:"total",label:"Total",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b",[t._v("$"+t._s(e.row.total))])]}}],null,!1,3737348549)}),a("b-table-column",{attrs:{field:"productos",label:"Productos",sortable:""},scopedSlots:t._u([{key:"default",fn:function(t){return[a("tabla-productos-vendidos",{attrs:{productos:t.row.productos}})]}}],null,!1,3066857836)}),a("b-table-column",{attrs:{field:"ticket",label:"Comprobante"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-button",{attrs:{type:"is-info","icon-left":"ticket-outline"},on:{click:function(a){return t.generarComprobante(e.row)}}},[t._v("Comprobante")])]}}],null,!1,2806756148)})],1)],1):t._e(),t.mostrarComprobante?a("comprobante-compra",{attrs:{venta:this.ventaSeleccionada,tipo:"venta"},on:{impreso:t.onImpreso}}):t._e(),a("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:t.cargando,callback:function(e){t.cargando=e},expression:"cargando"}})],1)},da=[],pa=(a(3123),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("b-field",{attrs:{label:"Selecciona un periodo"}},[a("b-datepicker",{attrs:{placeholder:"Click para seleccionar...",range:""},on:{input:t.onFechaSeleccionada},model:{value:t.fechasSeleccionadas,callback:function(e){t.fechasSeleccionadas=e},expression:"fechasSeleccionadas"}})],1)],1)}),ma=[],ba={name:"BusquedaEnFecha",data:function(){return{fechasSeleccionadas:[]}},methods:{onFechaSeleccionada:function(){this.$emit("seleccionada",this.fechasSeleccionadas)}}},fa=ba,ga=(0,p.Z)(fa,pa,ma,!1,null,null,null),ha=ga.exports,va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-table",{staticClass:"is-size-7",attrs:{data:t.productos}},[a("b-table-column",{attrs:{field:"nombre",label:"Nombre"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.nombre)+" ")]}}])}),a("b-table-column",{attrs:{field:"precio",label:"Precio"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" $"+t._s(e.row.precio)+" ")]}}])}),a("b-table-column",{attrs:{field:"cantidad",label:"Cantidad"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.cantidad)+" ")]}}])}),a("b-table-column",{attrs:{field:"subtotal",label:"Subtotal"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b",[t._v("$"+t._s(e.row.precio*e.row.cantidad))])]}}])})],1)},Ca=[],_a={name:"TablaProductosVendidos",props:["productos"]},ya=_a,ka=(0,p.Z)(ya,va,Ca,!1,null,null,null),xa=ka.exports,wa={name:"ReporteVentas",components:{BusquedaEnFecha:ha,TablaProductosVendidos:xa,MensajeInicial:L,CartasTotales:W,ComprobanteCompra:ra},data:function(){return{filtros:{fechaInicio:"",fechaFin:""},cargando:!1,ventas:[],isPaginated:!0,isPaginationSimple:!1,isPaginationRounded:!0,paginationPosition:"bottom",defaultSortDirection:"asc",sortIcon:"arrow-up",sortIconSize:"is-medium",currentPage:1,perPage:5,totalesGenerales:[],mostrarComprobante:!1,ventaSeleccionada:null}},mounted:function(){this.obtenerVentas()},methods:{onImpreso:function(t){this.mostrarComprobante=t},generarComprobante:function(t){this.mostrarComprobante=!0,this.ventaSeleccionada=t},onBusquedaEnFecha:function(t){this.filtros.fechaInicio=t[0].toISOString().split("T")[0],this.filtros.fechaFin=t[1].toISOString().split("T")[0],this.obtenerVentas()},obtenerVentas:function(){var t=this;this.cargando=!0;var e={filtros:this.filtros,accion:"obtener_ventas"};y.obtenerConConsultas("vender.php",e).then((function(e){t.ventas=e.ventas,t.totalesGenerales=[{nombre:"No. Ventas",total:t.ventas.length,icono:"cart",clase:"has-text-primary"},{nombre:"Total ventas",total:"$"+e.totalVentas,icono:"cash-fast",clase:"has-text-success"},{nombre:"Ganancia",total:"$"+pt.calcularTotalGanancia(t.ventas),icono:"currency-usd",clase:"has-text-info"},{nombre:"Productos vendidos",total:pt.calcularProductosVendidos(t.ventas),icono:"package-variant",clase:"has-text-danger"}],t.cargando=!1}))}}},Sa=wa,Pa=(0,p.Z)(Sa,ua,da,!1,null,null,null),Ea=Pa.exports,$a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("p",{staticClass:"title is-1"},[t._v("Reporte de cuentas")]),a("b-breadcrumb",{attrs:{align:"is-left"}},[a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/"}},[t._v("Inicio")]),a("b-breadcrumb-item",{attrs:{active:""}},[t._v("Cuentas")])],1),a("busqueda-en-fecha",{on:{seleccionada:t.onBusquedaEnFecha}}),t.cuentas.length<1?a("mensaje-inicial",{staticClass:"mt-2",attrs:{titulo:"No se han encontrado cuentas :(",subtitulo:"Aquí aparecerán las cuentas registradas"}}):t._e(),t.cuentas.length>0?a("div",{staticClass:"mt-2"},[a("cartas-totales",{attrs:{totales:t.totalesGenerales}}),a("tabla-cuentas-apartados",{attrs:{datos:t.cuentas},on:{abonar:t.onAbonar,liquidar:t.onLiquidar,imprimir:t.onGenerarComprobante}})],1):t._e(),t.mostrarComprobante?a("comprobante-compra",{attrs:{venta:this.cuentaSeleccionada,tipo:"cuenta"},on:{impreso:t.onImpreso}}):t._e(),a("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:t.cargando,callback:function(e){t.cargando=e},expression:"cargando"}})],1)},ja=[],za=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("b-select",{model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}},[a("option",{attrs:{value:"5"}},[t._v("5 por página")]),a("option",{attrs:{value:"10"}},[t._v("10 por página")]),a("option",{attrs:{value:"15"}},[t._v("15 por página")]),a("option",{attrs:{value:"20"}},[t._v("20 por página")])]),a("b-table",{staticClass:"box",attrs:{data:t.datos,paginated:t.isPaginated,"per-page":t.perPage,"current-page":t.currentPage,"pagination-simple":t.isPaginationSimple,"pagination-position":t.paginationPosition,"default-sort-direction":t.defaultSortDirection,"pagination-rounded":t.isPaginationRounded,"sort-icon":t.sortIcon,"sort-icon-size":t.sortIconSize,"default-sort":"user.first_name","aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page"},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}},[a("b-table-column",{attrs:{field:"fecha",label:"Fecha",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.fecha)+" ")]}}])}),a("b-table-column",{attrs:{field:"nombreCliente",label:"Cliente",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.nombreCliente)+" ")]}}])}),a("b-table-column",{attrs:{field:"nombreUsuario",label:"Usuario",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.nombreUsuario)+" ")]}}])}),a("b-table-column",{attrs:{field:"pagado",label:"Pago",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"has-text-info has-text-weight-bold"},[t._v("$"+t._s(e.row.pagado))])]}}])}),a("b-table-column",{attrs:{field:"porPagar",label:"Por pagar",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"has-text-danger has-text-weight-bold"},[t._v(" $"+t._s(e.row.porPagar))])]}}])}),a("b-table-column",{attrs:{field:"total",label:"Total",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b",[t._v("$"+t._s(e.row.total))])]}}])}),a("b-table-column",{attrs:{field:"productos",label:"Productos",sortable:""},scopedSlots:t._u([{key:"default",fn:function(t){return[a("tabla-productos-vendidos",{attrs:{productos:t.row.productos}})]}}])}),a("b-table-column",{attrs:{field:"estado",label:"Estado",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.porPagar<1?a("span",{staticClass:"tag is-success is-large"},[t._v("LIQUIDADO")]):t._e(),e.row.porPagar>0?a("span",{staticClass:"tag is-danger is-large"},[t._v("PENDIENTE")]):t._e()]}}])}),a("b-table-column",{attrs:{field:"ticket",label:"Comprobante"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-button",{attrs:{type:"is-info"},on:{click:function(a){return t.generarComprobante(e.row)}}},[a("b-icon",{attrs:{icon:"ticket-outline"}})],1)]}}])}),a("b-table-column",{attrs:{field:"abonar",label:"Abonar"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.porPagar>0?a("b-button",{attrs:{type:"is-primary"},on:{click:function(a){return t.abonar(e.row)}}},[a("b-icon",{attrs:{icon:"wallet-plus"}})],1):t._e()]}}])}),a("b-table-column",{attrs:{field:"liquidar",label:"Liquidar"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.porPagar>0?a("b-button",{attrs:{type:"is-success"},on:{click:function(a){return t.liquidar(e.row)}}},[a("b-icon",{attrs:{icon:"check-underline-circle"}})],1):t._e()]}}])})],1)],1)},Ma=[],Aa={name:"TablaProductosApartados",props:["datos"],components:{TablaProductosVendidos:xa},data:function(){return{isPaginated:!0,isPaginationSimple:!1,isPaginationRounded:!0,paginationPosition:"bottom",defaultSortDirection:"asc",sortIcon:"arrow-up",sortIconSize:"is-medium",currentPage:1,perPage:5}},methods:{generarComprobante:function(t){this.$emit("imprimir",t)},abonar:function(t){this.$emit("abonar",t)},liquidar:function(t){this.$emit("liquidar",t)}}},Ia=Aa,Ta=(0,p.Z)(Ia,za,Ma,!1,null,null,null),Da=Ta.exports,Na={name:"ReporteCuentas",components:{BusquedaEnFecha:ha,TablaCuentasApartados:Da,MensajeInicial:L,CartasTotales:W,ComprobanteCompra:ra},data:function(){return{filtros:{fechaInicio:"",fechaFin:""},cargando:!1,cuentas:[],totalesGenerales:[],cuentaSeleccionada:null,mostrarComprobante:!1}},mounted:function(){this.obtenerCuentas()},methods:{onImpreso:function(t){this.mostrarComprobante=t},onGenerarComprobante:function(t){this.cuentaSeleccionada=t,this.mostrarComprobante=!0},onLiquidar:function(t){var e=this;this.$buefy.dialog.confirm({message:"¿Liquidar cuenta? El cliente debe pagar: $"+t.porPagar,cancelText:"Cancelar",confirmText:"Liquidar",onConfirm:function(){e.cargando=!0,y.registrar("vender.php",{accion:"abonar",total:t.porPagar,id:t.id}).then((function(t){t&&(e.cargando=!1,e.$buefy.toast.open("Cuenta liquidada"),e.obtenerCuentas())}))}})},onAbonar:function(t){var e=this;this.$buefy.dialog.prompt({message:"Escribe el total del abono. Restan: $"+t.porPagar,cancelText:"Cancelar",confirmText:"Abonar",inputAttrs:{type:"number",placeholder:"Abono",value:"",min:1,max:t.porPagar},trapFocus:!0,onConfirm:function(a){e.cargando=!0,y.registrar("vender.php",{accion:"abonar",total:a,id:t.id}).then((function(t){t&&(e.cargando=!1,e.$buefy.toast.open("Abono registrado"),e.obtenerCuentas())}))}})},onBusquedaEnFecha:function(t){this.filtros.fechaInicio=t[0].toISOString().split("T")[0],this.filtros.fechaFin=t[1].toISOString().split("T")[0],this.obtenerCuentas()},obtenerCuentas:function(){var t=this;this.cargando=!0;var e={filtros:this.filtros,accion:"obtener_cuentas"};y.obtenerConConsultas("vender.php",e).then((function(e){t.cuentas=e.cuentas,t.totalesGenerales=[{nombre:"# Cuentas",total:t.cuentas.length,icono:"wallet",clase:"has-text-primary"},{nombre:"Total ",total:"$"+e.totalCuentas,icono:"cash-fast",clase:"has-text-success"},{nombre:"Por pagar",total:"$"+e.totalPorPagar,icono:"alert",clase:"has-text-danger"},{nombre:"Pagos",total:"$"+e.totalPagos,icono:"account-cash",clase:"has-text-grey-light"},{nombre:"# Productos",total:pt.calcularProductosVendidos(t.cuentas),icono:"package-variant",clase:"has-text-warning"},{nombre:"Ganancia",total:"$"+pt.calcularTotalGanancia(t.cuentas),icono:"currency-usd",clase:"has-text-info"}],t.cargando=!1}))}}},Za=Na,Va=(0,p.Z)(Za,$a,ja,!1,null,null,null),Ra=Va.exports,qa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("p",{staticClass:"title is-1"},[t._v("Reporte de apartados")]),a("b-breadcrumb",{attrs:{align:"is-left"}},[a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/"}},[t._v("Inicio")]),a("b-breadcrumb-item",{attrs:{active:""}},[t._v("Apartados")])],1),a("busqueda-en-fecha",{on:{seleccionada:t.onBusquedaEnFecha}}),t.apartados.length<1?a("mensaje-inicial",{staticClass:"mt-2",attrs:{titulo:"No se han encontrado apartados :(",subtitulo:"Aquí aparecerán los apartados registrados"}}):t._e(),t.apartados.length>0?a("div",{staticClass:"mt-2"},[a("cartas-totales",{attrs:{totales:t.totalesGenerales}}),a("tabla-cuentas-apartados",{attrs:{datos:t.apartados},on:{abonar:t.onAbonar,liquidar:t.onLiquidar,imprimir:t.onGenerarComprobante}})],1):t._e(),t.mostrarComprobante?a("comprobante-compra",{attrs:{venta:this.apartadoSeleccionado,tipo:"apartado"},on:{impreso:t.onImpreso}}):t._e(),a("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:t.cargando,callback:function(e){t.cargando=e},expression:"cargando"}})],1)},Ua=[],Fa={name:"ReporteApartados",components:{BusquedaEnFecha:ha,TablaCuentasApartados:Da,MensajeInicial:L,CartasTotales:W,ComprobanteCompra:ra},data:function(){return{filtros:{fechaInicio:"",fechaFin:""},cargando:!1,apartados:[],totalesGenerales:[],apartadoSeleccionado:null,mostrarComprobante:!1}},mounted:function(){this.obtenerApartados()},methods:{onImpreso:function(t){this.mostrarComprobante=t},onGenerarComprobante:function(t){this.apartadoSeleccionado=t,this.mostrarComprobante=!0},onLiquidar:function(t){var e=this;this.$buefy.dialog.confirm({message:"¿Liquidar apartado? El cliente debe pagar: $"+t.porPagar,cancelText:"Cancelar",confirmText:"Liquidar",onConfirm:function(){e.cargando=!0,y.registrar("vender.php",{accion:"abonar",total:t.porPagar,id:t.id}).then((function(t){t&&(e.cargando=!1,e.$buefy.toast.open("Apartado liquidado"),e.obtenerApartados())}))}})},onAbonar:function(t){var e=this;this.$buefy.dialog.prompt({message:"Escribe el total del abono. Restan: $"+t.porPagar,cancelText:"Cancelar",confirmText:"Abonar",inputAttrs:{type:"number",placeholder:"Abono",value:"",min:1,max:t.porPagar},trapFocus:!0,onConfirm:function(a){e.cargando=!0,y.registrar("vender.php",{accion:"abonar",total:a,id:t.id}).then((function(t){t&&(e.cargando=!1,e.$buefy.toast.open("Abono registrado"),e.obtenerApartados())}))}})},onBusquedaEnFecha:function(t){this.filtros.fechaInicio=t[0].toISOString().split("T")[0],this.filtros.fechaFin=t[1].toISOString().split("T")[0],this.obtenerApartados()},obtenerApartados:function(){var t=this;this.cargando=!0;var e={filtros:this.filtros,accion:"obtener_apartados"};y.obtenerConConsultas("vender.php",e).then((function(e){t.apartados=e.apartados,t.totalesGenerales=[{nombre:"# Apartados",total:t.apartados.length,icono:"wallet-travel",clase:"has-text-primary"},{nombre:"Total ",total:"$"+e.totalApartados,icono:"cash-fast",clase:"has-text-success"},{nombre:"Por pagar",total:"$"+e.totalPorPagar,icono:"alert",clase:"has-text-danger"},{nombre:"Pagos",total:"$"+e.totalPagos,icono:"account-cash",clase:"has-text-grey-light"},{nombre:"# Productos",total:pt.calcularProductosVendidos(t.apartados),icono:"package-variant",clase:"has-text-warning"},{nombre:"Ganancia",total:"$"+pt.calcularTotalGanancia(t.apartados),icono:"currency-usd",clase:"has-text-info"}],t.cargando=!1}))}}},Oa=Fa,Ga=(0,p.Z)(Oa,qa,Ua,!1,null,null,null),La=Ga.exports,Ba=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("p",{staticClass:"title is-1"},[t._v("Reporte de cotizaciones")]),a("b-breadcrumb",{attrs:{align:"is-left"}},[a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/"}},[t._v("Inicio")]),a("b-breadcrumb-item",{attrs:{active:""}},[t._v("Cotizaciones")])],1),a("busqueda-en-fecha",{on:{seleccionada:t.onBusquedaEnFecha}}),t.cotizaciones.length<1?a("mensaje-inicial",{staticClass:"mt-2",attrs:{titulo:"No se han encontrado cotizaciones :(",subtitulo:"Aquí aparecerán las cotizaciones registradas"}}):t._e(),t.cotizaciones.length>0?a("div",{staticClass:"mt-2"},[a("cartas-totales",{attrs:{totales:t.totalesGenerales}}),a("b-select",{model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}},[a("option",{attrs:{value:"5"}},[t._v("5 por página")]),a("option",{attrs:{value:"10"}},[t._v("10 por página")]),a("option",{attrs:{value:"15"}},[t._v("15 por página")]),a("option",{attrs:{value:"20"}},[t._v("20 por página")])]),a("b-table",{staticClass:"box",attrs:{data:t.cotizaciones,paginated:t.isPaginated,"per-page":t.perPage,"current-page":t.currentPage,"pagination-simple":t.isPaginationSimple,"pagination-position":t.paginationPosition,"default-sort-direction":t.defaultSortDirection,"pagination-rounded":t.isPaginationRounded,"sort-icon":t.sortIcon,"sort-icon-size":t.sortIconSize,"default-sort":"user.first_name","aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page"},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}},[a("b-table-column",{attrs:{field:"fecha",label:"Fecha",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.fecha)+" ")]}}],null,!1,1839029428)}),a("b-table-column",{attrs:{field:"nombreCliente",label:"Cliente",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.nombreCliente)+" ")]}}],null,!1,1401020376)}),a("b-table-column",{attrs:{field:"nombreUsuario",label:"Usuario",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.nombreUsuario)+" ")]}}],null,!1,1942981314)}),a("b-table-column",{attrs:{field:"total",label:"Total",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b",[t._v("$"+t._s(e.row.total))])]}}],null,!1,3737348549)}),a("b-table-column",{attrs:{field:"productos",label:"Productos",sortable:""},scopedSlots:t._u([{key:"default",fn:function(t){return[a("tabla-productos-vendidos",{attrs:{productos:t.row.productos}})]}}],null,!1,3066857836)}),a("b-table-column",{attrs:{field:"ticket",label:"Comprobante"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-button",{attrs:{type:"is-info"},on:{click:function(a){return t.generarComprobante(e.row)}}},[a("b-icon",{attrs:{icon:"ticket-outline"}})],1)]}}],null,!1,1379246500)}),a("b-table-column",{attrs:{field:"eliminar",label:"Eliminar"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-button",{attrs:{type:"is-danger"},on:{click:function(a){return t.eliminar(e.row.id)}}},[a("b-icon",{attrs:{icon:"delete"}})],1)]}}],null,!1,608520963)})],1)],1):t._e(),t.mostrarComprobante?a("comprobante-compra",{attrs:{venta:this.cotizacionSeleccionada,tipo:"cotiza"},on:{impreso:t.onImpreso}}):t._e(),a("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:t.cargando,callback:function(e){t.cargando=e},expression:"cargando"}})],1)},Ja=[],Qa={name:"ReporteCotizaciones",components:{BusquedaEnFecha:ha,MensajeInicial:L,CartasTotales:W,TablaProductosVendidos:xa,ComprobanteCompra:ra},data:function(){return{filtros:{fechaInicio:"",fechaFin:""},cargando:!1,cotizaciones:[],totalesGenerales:[],isPaginated:!0,isPaginationSimple:!1,isPaginationRounded:!0,paginationPosition:"bottom",defaultSortDirection:"asc",sortIcon:"arrow-up",sortIconSize:"is-medium",currentPage:1,perPage:5,cotizacionSeleccionada:null,mostrarComprobante:!1}},mounted:function(){this.obtenerCotizaciones()},methods:{onImpreso:function(t){this.mostrarComprobante=t},generarComprobante:function(t){this.cotizacionSeleccionada=t,this.mostrarComprobante=!0},eliminar:function(t){var e=this;this.$buefy.dialog.confirm({title:"Eliminar cotización",message:"¿Seguro que deseas eliminar esta cotizacion?",confirmText:"Sí, eliminar",cancelText:"Cancelar",type:"is-danger",hasIcon:!0,onConfirm:function(){e.cargando=!0,y.eliminar("vender.php",{accion:"eliminar_cotizacion",id:t}).then((function(t){t&&(e.cargando=!1,e.$buefy.toast.open("cotización eliminada"),e.obtenerCotizaciones())}))}})},onBusquedaEnFecha:function(t){this.filtros.fechaInicio=t[0].toISOString().split("T")[0],this.filtros.fechaFin=t[1].toISOString().split("T")[0],this.obtenerCotizaciones()},obtenerCotizaciones:function(){var t=this;this.cargando=!0;var e={filtros:this.filtros,accion:"obtener_cotizaciones"};y.obtenerConConsultas("vender.php",e).then((function(e){t.cotizaciones=e.cotizaciones,t.totalesGenerales=[{nombre:"Cotizaciones registradas",total:t.cotizaciones.length,icono:"ticket-outline",clase:"has-text-primary"}],t.cargando=!1}))}}},Ha=Qa,Ya=(0,p.Z)(Ha,Ba,Ja,!1,null,null,null),Wa=Ya.exports,Xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("nav-component",{attrs:{titulo:"Clientes",link:{path:"/agregar-cliente"},texto:"Agregar cliente"}}),a("b-table",{attrs:{data:t.clientes}},[a("b-table-column",{attrs:{field:"nombre",label:"Nombre del cliente",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.nombre)+" ")]}}])}),a("b-table-column",{attrs:{field:"telefono",label:"Teléfono",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.telefono)+" ")]}}])}),a("b-table-column",{attrs:{field:"eliminar",label:"Eliminar"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-button",{attrs:{type:"is-danger","icon-left":"delete"},on:{click:function(a){return t.eliminar(e.row.id)}}},[t._v("Eliminar")])]}}])}),a("b-table-column",{attrs:{field:"editar",label:"Editar"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-button",{attrs:{type:"is-info","icon-left":"pen"},on:{click:function(a){return t.editar(e.row.id)}}},[t._v("Editar")])]}}])})],1),a("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:t.cargando,callback:function(e){t.cargando=e},expression:"cargando"}})],1)},Ka=[],to={name:"ClientesComponent",components:{NavComponent:R},data:function(){return{cargando:!1,clientes:[]}},mounted:function(){this.obtenerClientes()},methods:{eliminar:function(t){var e=this;return(0,v.Z)((0,h.Z)().mark((function a(){return(0,h.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$buefy.dialog.confirm({title:"Eliminar cliente",message:"Seguro que quieres <b>eliminar</b> este cliente? Esta acción no se puede revertir.",confirmText:"Sí, eliminar",cancelText:"Cancelar",type:"is-danger",hasIcon:!0,onConfirm:function(){e.cargando=!0,y.eliminar("clientes.php",{accion:"eliminar",id:t}).then((function(t){if(!t)return e.$buefy.toast.open("Error al eliminar"),void(e.cargando=!1);t&&(e.cargando=!1,e.$buefy.toast.open({type:"is-info",message:"Cliente eliminado."}),e.obtenerClientes())}))}});case 1:case"end":return a.stop()}}),a)})))()},editar:function(t){this.$router.push({name:"EditarCliente",params:{id:t}})},obtenerClientes:function(){var t=this;this.cargando=!0;var e={accion:"obtener"};y.obtenerConConsultas("clientes.php",e).then((function(e){t.clientes=e,t.cargando=!1}))}}},eo=to,ao=(0,p.Z)(eo,Xa,Ka,!1,null,null,null),oo=ao.exports,no=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("p",{staticClass:"title is-1"},[t._v("Agregar cliente")]),a("b-breadcrumb",{attrs:{align:"is-left"}},[a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/"}},[t._v("Inicio")]),a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/cientes"}},[t._v("Clientes")]),a("b-breadcrumb-item",{attrs:{active:""}},[t._v("Agregar cliente")])],1),a("form-cliente",{attrs:{cliente:t.datosCliente},on:{registrar:t.onRegistrar}}),a("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:t.cargando,callback:function(e){t.cargando=e},expression:"cargando"}})],1)},ro=[],io=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[a("b-field",{attrs:{label:"Nombre del cliente"}},[a("b-input",{attrs:{step:"any",icon:"account",type:"text",placeholder:"Ej. Don Paco"},model:{value:t.datosCliente.nombre,callback:function(e){t.$set(t.datosCliente,"nombre",e)},expression:"datosCliente.nombre"}})],1),a("b-field",{attrs:{label:"Teléfono del cliente"}},[a("b-input",{attrs:{step:"any",icon:"phone",type:"number",placeholder:"Ej. 2311459874"},model:{value:t.datosCliente.telefono,callback:function(e){t.$set(t.datosCliente,"telefono",e)},expression:"datosCliente.telefono"}})],1),a("div",{staticClass:"buttons has-text-centered"},[a("b-button",{attrs:{type:"is-primary",size:"is-large","icon-left":"check"},on:{click:t.registrar}},[t._v("Registrar")]),a("b-button",{attrs:{type:"is-dark",size:"is-large","icon-left":"cancel",tag:"router-link",to:"/clientes"}},[t._v("Cancelar")])],1),t.mensajesError.length>0?a("errores-component",{attrs:{errores:t.mensajesError}}):t._e()],1)},so=[],co={name:"FormCliente",props:["cliente"],components:{ErroresComponent:vt},data:function(){return{datosCliente:{nombre:"",telefono:""},mensajesError:[]}},mounted:function(){this.datosCliente=this.cliente},methods:{registrar:function(){this.mensajesError=pt.validarDatos(this.datosCliente),this.mensajesError.length>0||(this.$emit("registrar",this.datosCliente),this.datosCliente={nombre:"",telefono:""})}}},lo=co,uo=(0,p.Z)(lo,io,so,!1,null,null,null),po=uo.exports,mo={name:"AgregarCliente",components:{FormCliente:po},data:function(){return{cargando:!1,datosCliente:{nombre:"",telefono:""}}},methods:{onRegistrar:function(t){var e=this;console.log(t),this.cargando=!0;var a={accion:"registrar",cliente:t};y.registrar("clientes.php",a).then((function(t){t&&(e.$buefy.toast.open({type:"is-info",message:"Cliente registrado con éxito."}),e.cargando=!1)}))}}},bo=mo,fo=(0,p.Z)(bo,no,ro,!1,null,null,null),go=fo.exports,ho=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("h1",{staticClass:"title is-1"},[t._v("Editar cliente")]),a("b-breadcrumb",{attrs:{align:"is-left"}},[a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/"}},[t._v("Inicio")]),a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/cientes"}},[t._v("Clientes")]),a("b-breadcrumb-item",{attrs:{active:""}},[t._v("Editar cliente")])],1),t.datosCliente?a("form-cliente",{attrs:{cliente:t.datosCliente},on:{registrar:t.onEditar}}):t._e(),a("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:t.cargando,callback:function(e){t.cargando=e},expression:"cargando"}})],1)},vo=[],Co={name:"EditaCliente",components:{FormCliente:po},data:function(){return{cargando:!1,datosCliente:null}},mounted:function(){var t=this;return(0,v.Z)((0,h.Z)().mark((function e(){var a;return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.cargando=!0,e.next=3,y.obtenerConConsultas("clientes.php",{accion:"obtener_por_id",id:t.$route.params.id});case 3:a=e.sent,t.datosCliente=a,t.cargando=!1;case 6:case"end":return e.stop()}}),e)})))()},methods:{onEditar:function(t){var e=this;return(0,v.Z)((0,h.Z)().mark((function a(){var o;return(0,h.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.cargando=!0,a.next=3,y.editar("clientes.php",{accion:"editar",cliente:t});case 3:o=a.sent,o&&(e.cargando=!1,e.$buefy.toast.open({type:"is-info",message:"Información de cliente actualizada con éxito."}),e.$router.push({name:"ClientesComponent"}));case 5:case"end":return a.stop()}}),a)})))()}}},_o=Co,yo=(0,p.Z)(_o,ho,vo,!1,null,null,null),ko=yo.exports,xo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("nav-component",{attrs:{titulo:"Usuarios",link:{path:"/agregar-usuario"},texto:"Agregar usuario"}}),t.usuarios.length<1?a("mensaje-inicial",{attrs:{titulo:"No se han registrado usuarios",subtitulo:"Agrega algunos usuarios"}}):t._e(),a("b-table",{attrs:{data:t.usuarios}},[a("b-table-column",{attrs:{field:"usuario",label:"Nombre de usuario",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.usuario)+" ")]}}])}),a("b-table-column",{attrs:{field:"nombre",label:"Nombre completo",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.nombre)+" ")]}}])}),a("b-table-column",{attrs:{field:"telefono",label:"Teléfono",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.telefono)+" ")]}}])}),a("b-table-column",{attrs:{field:"eliminar",label:"Eliminar"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-button",{attrs:{type:"is-danger","icon-left":"delete"},on:{click:function(a){return t.eliminar(e.row.id)}}},[t._v("Eliminar")])]}}])}),a("b-table-column",{attrs:{field:"editar",label:"Editar"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-button",{attrs:{type:"is-info","icon-left":"pen"},on:{click:function(a){return t.editar(e.row.id)}}},[t._v("Editar")])]}}])})],1),a("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:t.cargando,callback:function(e){t.cargando=e},expression:"cargando"}})],1)},wo=[],So={name:"UsuariosComponent",components:{MensajeInicial:L,NavComponent:R},data:function(){return{cargando:!1,usuarios:[]}},mounted:function(){this.obtenerUsuarios()},methods:{eliminar:function(t){var e=this;return(0,v.Z)((0,h.Z)().mark((function a(){return(0,h.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$buefy.dialog.confirm({title:"Eliminar usuario",message:"Seguro que quieres <b>eliminar</b> este usuario? Esta acción no se puede revertir.",confirmText:"Sí, eliminar",cancelText:"Cancelar",type:"is-danger",hasIcon:!0,onConfirm:function(){e.cargando=!0,y.eliminar("usuarios.php",{accion:"eliminar",id:t}).then((function(t){if(!t)return e.$buefy.toast.open("Error al eliminar"),void(e.cargando=!1);t&&(e.cargando=!1,e.$buefy.toast.open({type:"is-info",message:"Usuario eliminado."}),e.obtenerUsuarios())}))}});case 1:case"end":return a.stop()}}),a)})))()},editar:function(t){this.$router.push({name:"EditarUsuario",params:{id:t}})},obtenerUsuarios:function(){var t=this;this.cargando=!0;var e={accion:"obtener"};y.obtenerConConsultas("usuarios.php",e).then((function(e){t.usuarios=e,t.cargando=!1}))}}},Po=So,Eo=(0,p.Z)(Po,xo,wo,!1,null,null,null),$o=Eo.exports,jo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("p",{staticClass:"title is-1"},[t._v("Agregar usuario")]),a("b-breadcrumb",{attrs:{align:"is-left"}},[a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/"}},[t._v("Inicio")]),a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/usuarios"}},[t._v("Usuarios")]),a("b-breadcrumb-item",{attrs:{active:""}},[t._v("Agregar usuario")])],1),a("form-usuario",{attrs:{usuario:t.datosUsuario},on:{registrar:t.onRegistrar}}),a("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:t.cargando,callback:function(e){t.cargando=e},expression:"cargando"}})],1)},zo=[],Mo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[a("b-field",{attrs:{label:"Nombre de usuario"}},[a("b-input",{attrs:{icon:"shield-account",type:"text",placeholder:"Ej. paco"},model:{value:t.datosUsuario.usuario,callback:function(e){t.$set(t.datosUsuario,"usuario",e)},expression:"datosUsuario.usuario"}})],1),a("b-field",{attrs:{label:"Nombre completo "}},[a("b-input",{attrs:{icon:"account",type:"text",placeholder:"Ej. Francisco Perez Tezcatlipoca"},model:{value:t.datosUsuario.nombre,callback:function(e){t.$set(t.datosUsuario,"nombre",e)},expression:"datosUsuario.nombre"}})],1),a("b-field",{attrs:{label:"Teléfono del usuario"}},[a("b-input",{attrs:{step:"any",icon:"phone",type:"number",placeholder:"Ej. 2311459874"},model:{value:t.datosUsuario.telefono,callback:function(e){t.$set(t.datosUsuario,"telefono",e)},expression:"datosUsuario.telefono"}})],1),a("div",{staticClass:"buttons has-text-centered"},[a("b-button",{attrs:{type:"is-primary",size:"is-large","icon-left":"check"},on:{click:t.registrar}},[t._v("Registrar")]),a("b-button",{attrs:{type:"is-dark",size:"is-large","icon-left":"cancel",tag:"router-link",to:"/usuarios"}},[t._v("Cancelar")])],1),t.mensajesError.length>0?a("errores-component",{attrs:{errores:t.mensajesError}}):t._e()],1)},Ao=[],Io={name:"FormUsuario",props:["usuario"],components:{ErroresComponent:vt},data:function(){return{datosUsuario:{usuario:"",nombre:"",telefono:""},mensajesError:[]}},mounted:function(){this.datosUsuario=this.usuario},methods:{registrar:function(){this.mensajesError=pt.validarDatos(this.datosUsuario),this.mensajesError.length>0||(this.$emit("registrar",this.datosUsuario),this.datosUsuario={usuario:"",nombre:"",telefono:""})}}},To=Io,Do=(0,p.Z)(To,Mo,Ao,!1,null,null,null),No=Do.exports,Zo={name:"AgregarUsuario",components:{FormUsuario:No},data:function(){return{cargando:!1,datosUsuario:{usuario:"",nombre:"",telefono:""}}},methods:{onRegistrar:function(t){var e=this;console.log(t),this.cargando=!0;var a={accion:"registrar",usuario:t};y.registrar("usuarios.php",a).then((function(t){t&&(e.cargando=!1,e.$buefy.toast.open({type:"is-info",message:"Usuario registrado con éxito. Recuerda que la contraseña es PacoHunterDev"}))}))}}},Vo=Zo,Ro=(0,p.Z)(Vo,jo,zo,!1,null,null,null),qo=Ro.exports,Uo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("h1",{staticClass:"title is-1"},[t._v("Editar usuario")]),a("b-breadcrumb",{attrs:{align:"is-left"}},[a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/"}},[t._v("Inicio")]),a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/usuarios"}},[t._v("Usuarios")]),a("b-breadcrumb-item",{attrs:{active:""}},[t._v("Editar usuario")])],1),t.datosUsuario?a("form-usuario",{attrs:{usuario:t.datosUsuario},on:{registrar:t.onEditar}}):t._e(),a("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:t.cargando,callback:function(e){t.cargando=e},expression:"cargando"}})],1)},Fo=[],Oo={name:"EditarUsuario",components:{FormUsuario:No},data:function(){return{datosUsuario:null,cargando:!1}},mounted:function(){var t=this;return(0,v.Z)((0,h.Z)().mark((function e(){var a;return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.cargando=!0,e.next=3,y.obtenerConConsultas("usuarios.php",{accion:"obtener_por_id",id:t.$route.params.id});case 3:a=e.sent,t.datosUsuario=a,t.cargando=!1;case 6:case"end":return e.stop()}}),e)})))()},methods:{onEditar:function(t){var e=this;return(0,v.Z)((0,h.Z)().mark((function a(){var o;return(0,h.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.cargando=!0,a.next=3,y.editar("usuarios.php",{accion:"editar",usuario:t});case 3:o=a.sent,o&&(e.cargando=!1,e.$buefy.toast.open({type:"is-info",message:"Información de usuario actualizada con éxito."}),e.$router.push({name:"UsuariosComponent"}));case 5:case"end":return a.stop()}}),a)})))()}}},Go=Oo,Lo=(0,p.Z)(Go,Uo,Fo,!1,null,null,null),Bo=Lo.exports,Jo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("h1",{staticClass:"title is-1"},[t._v("Configuración general")]),a("b-breadcrumb",{attrs:{align:"is-left"}},[a("b-breadcrumb-item",{attrs:{tag:"router-link",to:"/"}},[t._v("Inicio")]),a("b-breadcrumb-item",{attrs:{acive:""}},[t._v("Configurar")])],1),t.datosNegocio?a("form-configuracion",{attrs:{datos:t.datosNegocio},on:{registrar:t.onRegistrar}}):t._e(),a("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:t.cargando,callback:function(e){t.cargando=e},expression:"cargando"}})],1)},Qo=[],Ho=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[a("b-field",{attrs:{label:"Nombre del negocio"}},[a("b-input",{attrs:{step:"any",icon:"store",type:"text",placeholder:"Ej. Tienda Doña Panque"},model:{value:t.datosNegocio.nombre,callback:function(e){t.$set(t.datosNegocio,"nombre",e)},expression:"datosNegocio.nombre"}})],1),a("b-field",{attrs:{label:"Teléfono"}},[a("b-input",{attrs:{step:"any",icon:"phone",type:"number",placeholder:"Ej. 2311459874"},model:{value:t.datosNegocio.telefono,callback:function(e){t.$set(t.datosNegocio,"telefono",e)},expression:"datosNegocio.telefono"}})],1),a("div",{staticClass:"field is-horizontal"},[a("div",{staticClass:"field-body"},[a("div",{staticClass:"file is-primary"},[a("label",{staticClass:"file-label"},[a("input",{ref:"fileInput",staticClass:"file-input",attrs:{type:"file",name:"resume"},on:{input:t.onFileChange}}),t._m(0)])])])]),a("img",{attrs:{src:t.urlImagen,width:"150",height:"200"}}),a("div",{staticClass:"buttons has-text-centered"},[a("b-button",{attrs:{type:"is-primary",size:"is-large","icon-left":"check"},on:{click:t.registrar}},[t._v("Registrar")]),a("b-button",{attrs:{type:"is-dark",size:"is-large","icon-left":"cancel",tag:"router-link",to:"/"}},[t._v("Cancelar")])],1),t.mensajesError.length>0?a("errores-component",{attrs:{errores:t.mensajesError}}):t._e()],1)},Yo=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"file-cta"},[a("span",{staticClass:"file-label"},[t._v(" Seleccionar logo ")])])}],Wo=(a(6699),a(2023),{name:"FormConfiguracion",props:["datos"],components:{ErroresComponent:vt},data:function(){return{datosNegocio:{nombre:"",telefono:""},urlImagen:null,mensajesError:[]}},mounted:function(){this.datosNegocio=this.datos,this.urlImagen=pt.regresarRuta()+this.datos.logo},methods:{onFileChange:function(){var t=this,e=this.$refs.fileInput,a=e.files;if(a&&a[0]){var o=new FileReader;o.onload=function(e){t.urlImagen=e.target.result},o.readAsDataURL(a[0]),this.$emit("input",a[0])}},registrar:function(){if(this.mensajesError=pt.validarDatos(this.datosNegocio),!(this.mensajesError.length>0)){var t=this.urlImagen.includes("data:image");this.datosNegocio.logo=t?this.urlImagen:this.urlImagen.split("api")[1],this.datosNegocio.cambiaLogo=t,this.$emit("registrar",this.datosNegocio)}}}}),Xo=Wo,Ko=(0,p.Z)(Xo,Ho,Yo,!1,null,null,null),tn=Ko.exports,en={name:"ConfiguracionComponent",components:{FormConfiguracion:tn},data:function(){return{cargando:!1,datosNegocio:null}},mounted:function(){this.obtenerDatos()},methods:{onRegistrar:function(t){var e=this;console.log(t),this.cargando=!0,y.registrar("ajustes.php",{accion:"registrar",ajustes:t}).then((function(t){t&&(e.cargando=!1,e.$buefy.toast.open({type:"is-info",message:"Información actualizada con éxito."}),e.obtenerDatos())}))},obtenerDatos:function(){var t=this;this.cargando=!0,y.obtenerConConsultas("ajustes.php",{accion:"obtener"}).then((function(e){t.datosNegocio=e,t.cargando=!1}))}}},an=en,on=(0,p.Z)(an,Jo,Qo,!1,null,null,null),nn=on.exports,rn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("nav-component",{attrs:{titulo:t.nombreUsuario,link:{path:"/cambiar-password"},texto:"Cambiar contraseña"}}),a("cartas-totales",{attrs:{totales:t.ingresos}}),a("div",{staticClass:"box"},[a("p",{staticClass:"title is-4"},[t._v("Tus ventas por meses")]),a("select-anio",{attrs:{grafica:"1"},on:{seleccionado:t.busquedaAnio}}),t._m(0)],1)],1)},sn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"contenedor-meses"}},[a("canvas",{attrs:{id:"grafica-meses"}})])}],cn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-field",[a("b-select",{attrs:{placeholder:"Selecciona el año"},nativeOn:{change:function(e){return t.seleccionar.apply(null,arguments)}},model:{value:t.anioActual,callback:function(e){t.anioActual=e},expression:"anioActual"}},t._l(t.anios,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0)],1)},ln=[],un={name:"SelectAnio",props:["grafica"],data:function(){return{anioActual:(new Date).getFullYear(),anios:[]}},mounted:function(){for(var t=2015;t<=this.anioActual;t++)this.anios.push(t)},methods:{seleccionar:function(){var t={noGrafica:this.grafica,anio:this.anioActual};this.$emit("seleccionado",t)}}},dn=un,pn=(0,p.Z)(dn,cn,ln,!1,null,null,null),mn=pn.exports,bn={name:"PerfilComponent",components:{NavComponent:R,CartasTotales:W,SelectAnio:mn},data:function(){return{nombreUsuario:"",ingresos:[],anioSeleccionado:(new Date).getFullYear(),totalesMeses:[]}},mounted:function(){this.nombreUsuario=localStorage.getItem("nombre"),this.obtenerIngresos(),this.obtenerTotalesMeses(this.anioSeleccionado)},methods:{busquedaAnio:function(t){this.obtenerTotalesMeses(t.anio)},obtenerTotalesMeses:function(t){var e=this;y.obtenerConConsultas("perfil.php",{accion:"obtener_ventas",anioSeleccionado:t,idUsuario:localStorage.getItem("id")}).then((function(t){e.totalesMeses=pt.cambiarNumeroANombreMes(t),e.crearGraficaVentasMeses(e.totalesMeses)}))},crearGraficaVentasMeses:function(t){pt.generarGrafica("bar",t,"#contenedor-meses","#grafica-meses","grafica-meses")},obtenerIngresos:function(){var t=this;y.obtenerConConsultas("perfil.php",{accion:"obtener_ingresos",idUsuario:localStorage.getItem("id")}).then((function(e){t.crearCartas(e)}))},crearCartas:function(t){this.ingresos=[{nombre:"Total ingresos",total:"$"+t.totalIngresos,icono:"currency-usd",clase:"has-text-success"},{nombre:"Ingresos hoy",total:"$"+t.ingresosHoy,icono:"calendar",clase:"has-text-primary"},{nombre:"Ingresos semana",total:"$"+t.ingresosSemana,icono:"calendar-range",clase:"has-text-info"},{nombre:"Ingresos mes",total:"$"+t.ingresosMes,icono:"calendar-month",clase:"has-text-dark"}]}}},fn=bn,gn=(0,p.Z)(fn,rn,sn,!1,null,null,null),hn=gn.exports,vn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("b-field",{attrs:{label:"Escribe la contraseña actual"}},[a("b-input",{attrs:{type:"password",placeholder:"Contraseña actual","password-reveal":""},model:{value:t.password.passwordActual,callback:function(e){t.$set(t.password,"passwordActual",e)},expression:"password.passwordActual"}})],1),a("b-field",{attrs:{label:"Escribe la contraseña nueva",message:"Al menos un número, Al menos una mayúscula, Al menos una minúscula, Mínimo 8 caracteres"}},[a("b-input",{attrs:{type:"password",placeholder:"Contraseña nueva","password-reveal":""},model:{value:t.password.passwordNueva,callback:function(e){t.$set(t.password,"passwordNueva",e)},expression:"password.passwordNueva"}})],1),a("b-field",{attrs:{label:"Repite la nueva contraseña"}},[a("b-input",{attrs:{type:"password",placeholder:"Repite nueva contraseña","password-reveal":""},model:{value:t.password.passwordRepetida,callback:function(e){t.$set(t.password,"passwordRepetida",e)},expression:"password.passwordRepetida"}})],1),a("div",{staticClass:"buttons has-text-centered"},[a("b-button",{attrs:{type:"is-primary",size:"is-large","icon-left":"check"},on:{click:t.registrar}},[t._v("Cambiar contraseña")]),a("b-button",{attrs:{type:"is-dark",size:"is-large","icon-left":"cancel",tag:"router-link",to:"/perfil"}},[t._v("Cancelar")])],1),t.mensajesErrores.length>0?a("errores-component",{attrs:{errores:t.mensajesErrores}}):t._e(),a("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:t.cargando,callback:function(e){t.cargando=e},expression:"cargando"}})],1)},Cn=[],_n=(a(7601),{name:"CambiarPassword",components:{ErroresComponent:vt},data:function(){return{password:{passwordActual:"",passwordNueva:"",passwordRepetida:""},mensajesErrores:[],cargando:!1}},methods:{registrar:function(){var t=this;return(0,v.Z)((0,h.Z)().mark((function e(){var a,o;return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.mensajesErrores=[],t.mensajesErrores=pt.validarDatos(t.password),e.next=4,t.verificarPasswordActual();case 4:if(a=e.sent,a||t.mensajesErrores.push("La contraseña actual ingresada es incorrecta"),t.password.passwordNueva!==t.password.passwordRepetida&&t.mensajesErrores.push("La contraseña repetida no coincide con la nueva"),o=t.validarPassword(t.password.passwordNueva),o||t.mensajesErrores.push("La contraseña nueva debe ser válida"),!(t.mensajesErrores.length>0)){e.next=11;break}return e.abrupt("return");case 11:t.$buefy.dialog.confirm({message:"¿Seguro que deseas cambiar la contraseña?",confirmText:"Sí, cambiar",cancelText:"Cancelar",onConfirm:function(){var e=(0,v.Z)((0,h.Z)().mark((function e(){var a;return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.cargando=!0,e.next=3,y.registrar("usuarios.php",{accion:"cambiar_password",idUsuario:l.obtenerDatosSesion().id,password:t.password.passwordRepetida});case 3:a=e.sent,a&&(t.$buefy.toast.open("Contraseña actualizada"),t.cargando=!1),console.log(a);case 6:case"end":return e.stop()}}),e)})));function a(){return e.apply(this,arguments)}return a}()});case 12:case"end":return e.stop()}}),e)})))()},verificarPasswordActual:function(){var t=this;return(0,v.Z)((0,h.Z)().mark((function e(){var a;return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={accion:"verificar_password",idUsuario:l.obtenerDatosSesion().id,password:t.password.passwordActual},e.next=3,y.obtenerConConsultas("usuarios.php",a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},validarPassword:function(t){var e=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/;return e.test(t)}}}),yn=_n,kn=(0,p.Z)(yn,vn,Cn,!1,null,null,null),xn=kn.exports,wn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("cartas-totales",{attrs:{totales:t.ingresos}}),a("div",{staticClass:"columns is-desktop"},[a("div",{staticClass:"column"},[a("div",{staticClass:"box"},[a("p",{staticClass:"title is-4"},[t._v("Ventas por meses")]),a("select-anio",{attrs:{grafica:"1"},on:{seleccionado:t.busquedaAnio}}),t._m(0)],1)]),a("div",{staticClass:"column"},[a("div",{staticClass:"box"},[a("p",{staticClass:"title is-4"},[t._v("Ventas por día")]),a("b-field",{attrs:{grouped:"","group-multiline":""}},[a("b-field",[a("select-mes",{on:{seleccionado:t.busquedaMes}})],1),a("b-field",[a("select-anio",{attrs:{grafica:"2"},on:{seleccionado:t.busquedaAnio}})],1)],1),t._m(1)],1)])]),t._m(2),t._m(3),a("div",{staticClass:"columns is-desktop"},[a("div",{staticClass:"column"},[a("div",{staticClass:"box"},[a("b-field",{staticClass:"is-pulled-right"},[a("b-select",{attrs:{placeholder:"Selecciona el limite"},nativeOn:{change:function(e){return t.seleccionarLimite.apply(null,arguments)}},model:{value:t.limite,callback:function(e){t.limite=e},expression:"limite"}},[a("option",{attrs:{value:"5"}},[t._v("5")]),a("option",{attrs:{value:"10"}},[t._v("10")]),a("option",{attrs:{value:"15"}},[t._v("15")]),a("option",{attrs:{value:"20"}},[t._v("20")])])],1),a("p",{staticClass:"title is-4"},[t._v("Productos más vendidos")]),a("b-table",{attrs:{data:t.productosMayoresVentas}},[a("b-table-column",{attrs:{field:"nombre",label:"Producto"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.nombre)+" ")]}}])}),a("b-table-column",{attrs:{field:"unidades",label:"Unidades vendidas"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.unidades)+" ")]}}])}),a("b-table-column",{attrs:{field:"total",label:"Total ventas"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" $"+t._s(e.row.total)+" ")]}}])}),a("b-table-column",{attrs:{field:"progreso",label:"Progreso"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-progress",{attrs:{type:t.generarColorPorcentaje(e.row.total),value:t.calcularPorcentajeProducto(e.row.total),"show-value":""}})]}}])})],1)],1)])])],1)},Sn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"contenedor-meses"}},[a("canvas",{attrs:{id:"grafica-meses"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"contenedor-dias"}},[a("canvas",{attrs:{id:"grafica-dias"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"columns is-desktop"},[a("div",{staticClass:"column"},[a("div",{staticClass:"box"},[a("p",{staticClass:"title is-4"},[t._v("Ventas por usuarios")]),a("div",{attrs:{id:"contenedor-usuarios"}},[a("canvas",{attrs:{id:"grafica-usuarios"}})])])]),a("div",{staticClass:"column"},[a("div",{staticClass:"box"},[a("p",{staticClass:"title is-4"},[t._v("Ventas por clientes")]),a("div",{attrs:{id:"contenedor-clientes"}},[a("canvas",{attrs:{id:"grafica-clientes"}})])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"columns is-desktop"},[a("div",{staticClass:"column"},[a("div",{staticClass:"box"},[a("p",{staticClass:"title is-4"},[t._v("Ventas por categorías")]),a("div",{attrs:{id:"contenedor-categorias"}},[a("canvas",{attrs:{id:"grafica-categorias"}})])])]),a("div",{staticClass:"column"},[a("div",{staticClass:"box"},[a("p",{staticClass:"title is-4"},[t._v("Ventas por marcas")]),a("div",{attrs:{id:"contenedor-marcas"}},[a("canvas",{attrs:{id:"grafica-marcas"}})])])])])}],Pn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-field",[a("b-select",{attrs:{placeholder:"Selecciona el mes"},nativeOn:{change:function(e){return t.seleccionar.apply(null,arguments)}},model:{value:t.mesActual,callback:function(e){t.mesActual=e},expression:"mesActual"}},t._l(t.meses,(function(e){return a("option",{key:e.numero,domProps:{value:e.numero}},[t._v(" "+t._s(e.mes)+" ")])})),0)],1)},En=[],$n={name:"SelectMes",data:function(){return{mesActual:(new Date).getMonth()+1,meses:[{numero:1,mes:"Enero"},{numero:2,mes:"Febrero"},{numero:3,mes:"Marzo"},{numero:4,mes:"Abril"},{numero:5,mes:"Mayo"},{numero:6,mes:"Junio"},{numero:7,mes:"Julio"},{numero:8,mes:"Agosto"},{numero:9,mes:"Septiembre"},{numero:10,mes:"Octubre"},{numero:11,mes:"Noviembre"},{numero:12,mes:"Diciembre"}]}},methods:{seleccionar:function(){this.$emit("seleccionado",this.mesActual)}}},jn=$n,zn=(0,p.Z)(jn,Pn,En,!1,null,null,null),Mn=zn.exports,An={name:"InicioComponent",components:{CartasTotales:W,SelectAnio:mn,SelectMes:Mn},data:function(){return{ingresos:[],totalesMeses:[],totalesUsuarios:[],totalesClientes:[],totalesDia:[],productosMayoresVentas:[],mesSeleccionado:(new Date).getMonth()+1,anioSeleccionado:(new Date).getFullYear(),limite:5}},mounted:function(){this.obtenerIngresos(),this.obtenerTotalesMeses(this.anioSeleccionado),this.obtenerTotalesUsuarios(),this.obtenerTotalesClientes(),this.obtenerTotalesDiaMes(this.mesSeleccionado,this.anioSeleccionado),this.obtenerProductosMayoresVentas(this.limite),this.obtenerMarcasCategorias()},methods:{seleccionarLimite:function(){this.obtenerProductosMayoresVentas(this.limite)},busquedaMes:function(t){this.mesSeleccionado=t,this.obtenerTotalesDiaMes(this.mesSeleccionado,this.anioSeleccionado)},busquedaAnio:function(t){switch(t.noGrafica){case"1":this.obtenerTotalesMeses(t.anio);break;case"2":this.anioSeleccionado=t.anio,this.obtenerTotalesDiaMes(this.mesSeleccionado,this.anioSeleccionado);break;default:console.log("No reconocido")}},generarColorPorcentaje:function(t){var e=this.calcularPorcentajeProducto(t);return e>=90?"is-success":e<90&&e>=80?"is-info":e<80&&e>=60?"is-warning":"is-danger"},calcularPorcentajeProducto:function(t){if(this.productosMayoresVentas.length>0){var e=this.productosMayoresVentas[0].total;return parseInt(100*t/e)}},obtenerIngresos:function(){var t=this;y.obtenerConConsultas("inicio.php",{accion:"obtener_ingresos"}).then((function(e){t.crearCartas(e)}))},obtenerMarcasCategorias:function(){var t=this;y.obtenerConConsultas("inicio.php",{accion:"obtener_marcas_categorias"}).then((function(e){t.crearGraficaVentasCategorias(e.categorias),t.crearGraficaVentasMarcas(e.marcas)}))},obtenerTotalesMeses:function(t){var e=this;y.obtenerConConsultas("inicio.php",{accion:"obtener_totales_meses",anioSeleccionado:t}).then((function(t){e.totalesMeses=pt.cambiarNumeroANombreMes(t),e.crearGraficaVentasMeses(e.totalesMeses)}))},obtenerTotalesDiaMes:function(t,e){var a=this;y.obtenerConConsultas("inicio.php",{accion:"obtener_totales_dia",mesSeleccionado:t,anioSeleccionado:e}).then((function(t){a.totalesDia=t,a.crearGraficaVentasDiasMes(a.totalesDia)}))},obtenerTotalesUsuarios:function(){var t=this;y.obtenerConConsultas("inicio.php",{accion:"obtener_totales_usuarios"}).then((function(e){t.totalesUsuarios=e,t.crearGraficaVentasUsuarios(t.totalesUsuarios)}))},obtenerTotalesClientes:function(){var t=this;y.obtenerConConsultas("inicio.php",{accion:"obtener_totales_clientes"}).then((function(e){t.totalesClientes=e,t.crearGraficaVentasClientes(t.totalesClientes)}))},obtenerProductosMayoresVentas:function(t){var e=this;y.obtenerConConsultas("inicio.php",{accion:"obtener_productos_mayores",limite:t}).then((function(t){e.productosMayoresVentas=t}))},crearCartas:function(t){this.ingresos=[{nombre:"Total ingresos",total:"$"+t.totalIngresos,icono:"currency-usd",clase:"has-text-success"},{nombre:"Ingresos hoy",total:"$"+t.ingresosHoy,icono:"calendar",clase:"has-text-primary"},{nombre:"Ingresos semana",total:"$"+t.ingresosSemana,icono:"calendar-range",clase:"has-text-info"},{nombre:"Ingresos mes",total:"$"+t.ingresosMes,icono:"calendar-month",clase:"has-text-dark"},{nombre:"Ingresos pendientes",total:"$"+t.ingresosPendientes,icono:"alert",clase:"has-text-danger"}]},crearGraficaVentasMeses:function(t){pt.generarGrafica("bar",t,"#contenedor-meses","#grafica-meses","grafica-meses")},crearGraficaVentasUsuarios:function(t){pt.generarGrafica("pie",t,"#contenedor-usuarios","#grafica-usuarios","grafica-usuarios")},crearGraficaVentasClientes:function(t){pt.generarGrafica("pie",t,"#contenedor-clientes","#grafica-clientes","grafica-clientes")},crearGraficaVentasDiasMes:function(t){pt.generarGrafica("bar",t,"#contenedor-dias","#grafica-dias","grafica-dias")},crearGraficaVentasCategorias:function(t){pt.generarGrafica("line",t,"#contenedor-categorias","#grafica-categorias","grafica-categorias")},crearGraficaVentasMarcas:function(t){pt.generarGrafica("line",t,"#contenedor-marcas","#grafica-marcas","grafica-marcas")}}},In=An,Tn=(0,p.Z)(In,wn,Sn,!1,null,null,null),Dn=Tn.exports;o.Z.use(M.Z);var Nn=[{path:"/",name:"InicioComponent",component:Dn},{path:"/inventario",name:"ProductosComponent",component:et},{path:"/agregar-producto",name:"AgregarProducto",component:Pt},{path:"/editar-producto/:id",name:"EditarProducto",component:At},{path:"/marcas-y-categorias",name:"MarcasCategorias",component:ce},{path:"/realizar-venta",name:"RealizarVenta",component:la},{path:"/reporte-ventas",name:"ReporteVentas",component:Ea},{path:"/reporte-cuentas",name:"ReporteCuentas",component:Ra},{path:"/reporte-apartados",name:"ReporteApartados",component:La},{path:"/reporte-cotizaciones",name:"ReporteCotizaciones",component:Wa},{path:"/clientes",name:"ClientesComponent",component:oo},{path:"/agregar-cliente",name:"AgregarCliente",component:go},{path:"/editar-cliente/:id",name:"EditarCliente",component:ko},{path:"/usuarios",name:"UsuariosComponent",component:$o},{path:"/agregar-usuario",name:"AgregarUsuario",component:qo},{path:"/editar-usuario/:id",name:"EditarUsuario",component:Bo},{path:"/configurar",name:"ConfiguracionComponent",component:nn},{path:"/perfil",name:"PerfilComponent",component:hn},{path:"/cambiar-password",name:"CambiarPassword",component:xn}],Zn=new M.Z({routes:Nn}),Vn=Zn;o.Z.use(z.ZP),o.Z.config.productionTip=!1,new o.Z({router:Vn,render:function(t){return t(j)}}).$mount("#app")},6949:function(t,e,a){"use strict";t.exports=a.p+"img/logo.218115e9.png"}},e={};function a(o){var n=e[o];if(void 0!==n)return n.exports;var r=e[o]={id:o,loaded:!1,exports:{}};return t[o].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=t,function(){var t=[];a.O=function(e,o,n,r){if(!o){var i=1/0;for(u=0;u<t.length;u++){o=t[u][0],n=t[u][1],r=t[u][2];for(var s=!0,c=0;c<o.length;c++)(!1&r||i>=r)&&Object.keys(a.O).every((function(t){return a.O[t](o[c])}))?o.splice(c--,1):(s=!1,r<i&&(i=r));if(s){t.splice(u--,1);var l=n();void 0!==l&&(e=l)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[o,n,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){a.p="/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,o){var n,r,i=o[0],s=o[1],c=o[2],l=0;if(i.some((function(e){return 0!==t[e]}))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(c)var u=c(a)}for(e&&e(o);l<i.length;l++)r=i[l],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(u)},o=self["webpackChunkpos"]=self["webpackChunkpos"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(6886)}));o=a.O(o)})();
//# sourceMappingURL=app-legacy.dcd46b18.js.map